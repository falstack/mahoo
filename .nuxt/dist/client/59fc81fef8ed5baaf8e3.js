(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{354:function(t,e,n){},360:function(t,e,n){"use strict";n(236);var o={name:"UserAvatar",props:{user:{type:Object,required:!0},avatar:{type:String,default:""},size:{type:Number,default:40},disabled:{type:Boolean,default:!1}}},r=(n(367),n(19)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.disabled?n("div",{staticClass:"user-avatar",style:{width:t.size+"px",height:t.size+"px"}},[n("VImg",{attrs:{radius:"50%",src:t.avatar||t.user.avatar,width:t.size,height:t.size,alt:t.user.nickname}})],1):n("NLink",{staticClass:"user-avatar",style:{width:t.size+"px",height:t.size+"px"},attrs:{to:t.$alias.user(t.user.slug),target:"_blank"}},[n("VImg",{attrs:{radius:"50%",src:t.avatar||t.user.avatar,width:t.size,height:t.size,alt:t.user.nickname}})],1)}),[],!1,null,null,null);e.a=component.exports},367:function(t,e,n){"use strict";var o=n(354);n.n(o).a},417:function(t,e,n){},540:function(t,e,n){t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(object,t){return Object.prototype.hasOwnProperty.call(object,t)},n.p="/dist/",n(n.s=91)}({0:function(t,e,n){"use strict";function o(t,e,n,o,r,l,c,d){var f,h="function"==typeof t?t.options:t;if(e&&(h.render=e,h.staticRenderFns=n,h._compiled=!0),o&&(h.functional=!0),l&&(h._scopeId="data-v-"+l),c?(f=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(c)},h._ssrRegister=f):r&&(f=d?function(){r.call(this,this.$root.$options.shadowRoot)}:r),f)if(h.functional){h._injectStyles=f;var v=h.render;h.render=function(t,e){return f.call(e),v(t,e)}}else{var m=h.beforeCreate;h.beforeCreate=m?[].concat(m,f):[f]}return{exports:t,options:h}}n.d(e,"a",(function(){return o}))},28:function(t,e){t.exports=n(541)},3:function(t,e){t.exports=n(76)},4:function(t,e){t.exports=n(115)},91:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-collapse-item",class:{"is-active":t.isActive,"is-disabled":t.disabled}},[n("div",{attrs:{role:"tab","aria-expanded":t.isActive,"aria-controls":"el-collapse-content-"+t.id,"aria-describedby":"el-collapse-content-"+t.id}},[n("div",{staticClass:"el-collapse-item__header",class:{focusing:t.focusing,"is-active":t.isActive},attrs:{role:"button",id:"el-collapse-head-"+t.id,tabindex:t.disabled?void 0:0},on:{click:t.handleHeaderClick,keyup:function(e){return"button"in e||!t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.stopPropagation(),t.handleEnterClick(e)):null},focus:t.handleFocus,blur:function(e){t.focusing=!1}}},[t._t("title",[t._v(t._s(t.title))]),n("i",{staticClass:"el-collapse-item__arrow el-icon-arrow-right",class:{"is-active":t.isActive}})],2)]),n("el-collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"el-collapse-item__wrap",attrs:{role:"tabpanel","aria-hidden":!t.isActive,"aria-labelledby":"el-collapse-head-"+t.id,id:"el-collapse-content-"+t.id}},[n("div",{staticClass:"el-collapse-item__content"},[t._t("default")],2)])])],1)};o._withStripped=!0;var r=n(28),l=n.n(r),c=n(4),d=n.n(c),f=n(3),h={name:"ElCollapseItem",componentName:"ElCollapseItem",mixins:[d.a],components:{ElCollapseTransition:l.a},data:function(){return{contentWrapStyle:{height:"auto",display:"block"},contentHeight:0,focusing:!1,isClick:!1,id:Object(f.generateId)()}},inject:["collapse"],props:{title:String,name:{type:[String,Number],default:function(){return this._uid}},disabled:Boolean},computed:{isActive:function(){return this.collapse.activeNames.indexOf(this.name)>-1}},methods:{handleFocus:function(){var t=this;setTimeout((function(){t.isClick?t.isClick=!1:t.focusing=!0}),50)},handleHeaderClick:function(){this.disabled||(this.dispatch("ElCollapse","item-click",this),this.focusing=!1,this.isClick=!0)},handleEnterClick:function(){this.dispatch("ElCollapse","item-click",this)}}},v=n(0),component=Object(v.a)(h,o,[],!1,null,null,null);component.options.__file="packages/collapse/src/collapse-item.vue";var m=component.exports;m.install=function(t){t.component(m.name,m)};e.default=m}})},541:function(t,e,n){"use strict";e.__esModule=!0;var o=n(117);var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.beforeEnter=function(t){(0,o.addClass)(t,"collapse-transition"),t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.style.height="0",t.style.paddingTop=0,t.style.paddingBottom=0},t.prototype.enter=function(t){t.dataset.oldOverflow=t.style.overflow,0!==t.scrollHeight?(t.style.height=t.scrollHeight+"px",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom):(t.style.height="",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom),t.style.overflow="hidden"},t.prototype.afterEnter=function(t){(0,o.removeClass)(t,"collapse-transition"),t.style.height="",t.style.overflow=t.dataset.oldOverflow},t.prototype.beforeLeave=function(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.dataset.oldOverflow=t.style.overflow,t.style.height=t.scrollHeight+"px",t.style.overflow="hidden"},t.prototype.leave=function(t){0!==t.scrollHeight&&((0,o.addClass)(t,"collapse-transition"),t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0)},t.prototype.afterLeave=function(t){(0,o.removeClass)(t,"collapse-transition"),t.style.height="",t.style.overflow=t.dataset.oldOverflow,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom},t}();e.default={name:"ElCollapseTransition",functional:!0,render:function(t,e){var n=e.children;return t("transition",{on:new r},n)}}},542:function(t,e,n){t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(object,t){return Object.prototype.hasOwnProperty.call(object,t)},n.p="/dist/",n(n.s=92)}({0:function(t,e,n){"use strict";function o(t,e,n,o,r,l,c,d){var f,h="function"==typeof t?t.options:t;if(e&&(h.render=e,h.staticRenderFns=n,h._compiled=!0),o&&(h.functional=!0),l&&(h._scopeId="data-v-"+l),c?(f=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(c)},h._ssrRegister=f):r&&(f=d?function(){r.call(this,this.$root.$options.shadowRoot)}:r),f)if(h.functional){h._injectStyles=f;var v=h.render;h.render=function(t,e){return f.call(e),v(t,e)}}else{var m=h.beforeCreate;h.beforeCreate=m?[].concat(m,f):[f]}return{exports:t,options:h}}n.d(e,"a",(function(){return o}))},92:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"el-collapse",attrs:{role:"tablist","aria-multiselectable":"true"}},[this._t("default")],2)};o._withStripped=!0;var r={name:"ElCollapse",componentName:"ElCollapse",props:{accordion:Boolean,value:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{activeNames:[].concat(this.value)}},provide:function(){return{collapse:this}},watch:{value:function(t){this.activeNames=[].concat(t)}},methods:{setActiveNames:function(t){t=[].concat(t);var e=this.accordion?t[0]:t;this.activeNames=t,this.$emit("input",e),this.$emit("change",e)},handleItemClick:function(t){if(this.accordion)this.setActiveNames(!this.activeNames[0]&&0!==this.activeNames[0]||this.activeNames[0]!==t.name?t.name:"");else{var e=this.activeNames.slice(0),n=e.indexOf(t.name);n>-1?e.splice(n,1):e.push(t.name),this.setActiveNames(e)}}},created:function(){this.$on("item-click",this.handleItemClick)}},l=n(0),component=Object(l.a)(r,o,[],!1,null,null,null);component.options.__file="packages/collapse/src/collapse.vue";var c=component.exports;c.install=function(t){t.component(c.name,c)};e.default=c}})},543:function(t,e,n){"use strict";var o=n(417);n.n(o).a},683:function(t,e,n){"use strict";n.r(e);n(46),n(235);var o=n(540),r=n.n(o),l=n(542),c=n.n(l),d=n(360),f={name:"Managers",components:{ElCollapse:c.a,ElCollapseItem:r.a,UserAvatar:d.a},asyncData:function(t){var e=t.app,n=t.error;return e.$axios.$get("v1/user/managers").then((function(t){return{list:t,actives:Object.keys(t)}})).catch(n)},data:function(){return{list:[],actives:[]}},computed:{showPlus:function(){return this.$hasRole("add_manager")},showDelete:function(){return this.$hasRole("remove_manager")}},methods:{removeManager:function(t,e){var n=this;this.$confirm("确认要执行该操作吗？","移除".concat(t)).then((function(){n.$axios.$post("v1/user/remove_manager",{role:t,slug:e}).then((function(){n.$toast.success("操作成功！").then((function(){window.location.reload()}))})).catch((function(t){n.$toast.error(t.message)}))})).catch((function(){}))},addManager:function(t){var e=this;this.$prompt("请输入要指定的用户cc号","添加".concat(t)).then((function(n){var o=n.value.trim();if(o.length>16||o.length<2||!/^([a-z0-9]|_|-)+$/i.test(o))return e.$toast.error("错误的cc号");e.$axios.$post("v1/user/add_manager",{role:t,slug:o}).then((function(){e.$toast.success("操作成功！").then((function(){window.location.reload()}))})).catch((function(t){e.$toast.error(t.message)}))})).catch((function(){}))}}},h=(n(543),n(19)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"managers"}},[n("ElCollapse",{model:{value:t.actives,callback:function(e){t.actives=e},expression:"actives"}},t._l(t.list,(function(e,o){return n("ElCollapseItem",{key:o,attrs:{title:o+"（"+e.length+"）",name:o}},[n("ul",{staticClass:"user-list clearfix"},[t._l(e,(function(e){return n("li",{key:e.slug,staticClass:"user-item"},[n("UserAvatar",{attrs:{size:80,user:e}}),t._v(" "),n("p",{staticClass:"nickname oneline",domProps:{textContent:t._s(e.nickname)}}),t._v(" "),t.showDelete?n("i",{staticClass:"remove-btn el-icon-remove",on:{click:function(n){return t.removeManager(o,e.slug)}}}):t._e()],1)})),t._v(" "),t.showPlus?n("li",{staticClass:"user-plus",on:{click:function(e){return t.addManager(o)}}},[n("i",{staticClass:"el-icon-plus"})]):t._e()],2)])})),1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);