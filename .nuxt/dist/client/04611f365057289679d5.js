(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{478:function(t,e,n){},615:function(t,e,n){"use strict";var o=n(478);n.n(o).a},636:function(t,e,n){"use strict";n.r(e);var o=n(614),c=n.n(o),h=n(178),r=n(492),l=n(493),w=n(494),d={name:"SignDialog",components:{SignUpForm:l.a,SignInForm:r.a,ResetPasswordForm:w.a},data:()=>({canRender:!1,showModal:!1,showSignIn:!1,showSignUp:!1,showReset:!1}),computed:{isGuest(){return!this.$store.state.isAuth}},mounted(){this.canRender=!0,this.$channel.$on("sign-in",()=>{window.screen.width<=768?window.location.href=this.$alias.sign():this.showLogin()}),this.$channel.$on("sign-up",()=>{this.showRegister()})},methods:{showLogin(){this.showReset=!1,this.showModal=!0,this.showSignIn=!0,this.showSignUp=!1},showRegister(){this.showModal=!0,this.showSignUp=!0,this.showSignIn=!1},hiddenSign(){this.showModal=!1,this.showSignIn=!1,this.showSignUp=!1,this.showReset=!1}}},v=(n(615),n(11)),m=Object(v.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.canRender?n("div",{staticClass:"sign-container"},[t.isGuest?n("div",{class:[t.showModal?"space-enter":"space-leave"],attrs:{id:"space3D"},on:{click:t.hiddenSign}},[n("div",{ref:"wrap",staticClass:"sign-modal-wrap"},[n("div",{staticClass:"sign-modal sign-in-modal",class:{"sign-in-init":!t.showSignIn&&!t.showSignUp,"sign-in-show":t.showSignIn&&!t.showSignUp,"sign-in-turn":!t.showSignIn&&t.showSignUp},on:{click:function(t){t.stopPropagation()}}},[t._m(0),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showReset,expression:"showReset"}],staticClass:"form-container"},[n("ResetPasswordForm",{on:{"to-login":function(e){t.showReset=!1},"to-register":t.showRegister}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showReset,expression:"!showReset"}],staticClass:"form-container"},[n("SignInForm",{on:{"to-reset":function(e){t.showReset=!0},"to-register":t.showRegister}})],1)]),t._v(" "),n("div",{staticClass:"sign-modal sign-up-modal",class:{"sign-up-init":!t.showSignUp&&!t.showSignIn,"sign-up-show":t.showSignUp&&!t.showSignIn,"sign-up-turn":!t.showSignUp&&t.showSignIn},on:{click:function(t){t.stopPropagation()}}},[t._m(1),t._v(" "),n("div",{staticClass:"form-container"},[n("SignUpForm",{on:{"to-login":t.showLogin}})],1)])])]):t._e()]):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:"https://file.calibur.tv/logo.png",alt:"logo"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:"https://file.calibur.tv/logo.png",alt:"logo"}})])}],!1,null,null,null).exports,S=n(367),f={beforeMount(){this.$channel.$when("user-signed",()=>{var t=()=>Date.now()-this.$cache.get("socket-connect-heartbeat",0)<=1e3;setTimeout(()=>{var e=()=>{this.$channel.socketConnect();var t=setInterval(()=>{this.$store.state.socket.isConnected?this.$cache.set("socket-connect-heartbeat",Date.now()):clearInterval(t)},1e3);window.addEventListener("beforeunload",()=>{this.$channel.socketDisconnect()})};t()||"visible"!==document.visibilityState?(this.$store.commit("SOCKET_AUTO_CONNECT"),(()=>{var n=setInterval(()=>{t()?Date.now()-this.$cache.get("socket-on-message-time",0)<=1e3&&this.$store.commit("SOCKET_ONMESSAGE",this.$cache.get("socket-on-message-data")):"visible"===document.visibilityState&&(e(),clearInterval(n))},2e3)})()):e()},2e3)})},beforeDestroy(){this.$store.state.socket.isConnected&&this.$channel.socketDisconnect()}},$={name:"WebLayout",components:{VHeader:h.a,ElBacktop:c.a,SignDialog:m},mixins:[S.a,f]},_=Object(v.a)($,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"layout-web"}},[e("VHeader"),this._v(" "),e("nuxt"),this._v(" "),e("SignDialog"),this._v(" "),e("ElBacktop",{staticClass:"only-pc"},[e("i",{staticClass:"el-icon-caret-top"})])],1)}),[],!1,null,null,null);e.default=_.exports}}]);