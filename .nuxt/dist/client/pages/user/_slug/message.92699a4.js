/*! For license information please see ../../../LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{376:function(t,e,n){},382:function(t,e,n){"use strict";n(182);var o={name:"UserAvatar",props:{user:{type:Object,required:!0},avatar:{type:String,default:""},size:{type:Number,default:40},disabled:{type:Boolean,default:!1}}},r=(n(396),n(9)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("NLink",{staticClass:"user-avatar",style:{width:t.size+"px",height:t.size+"px"},attrs:{to:t.$alias.user(t.user.slug),target:"_blank"}},[n("VImg",{attrs:{radius:"50%",src:t.avatar||t.user.avatar,width:t.size,height:t.size,alt:t.user.nickname}})],1)}),[],!1,null,null,null);e.a=component.exports},383:function(t,e,n){"use strict";e.a={beforeMount:function(){var t=this;this.$channel.$when("user-not-sign",(function(){t.$toast.error("继续操作前请先登录").then((function(){window.location.href=t.$alias.sign()}))}))}}},385:function(t,e,n){t.exports={h1:"h1_17sSx",h2:"h2_29h8C",h3:"h3_pcROM",h4:"h4_-wXkD",h5:"h5_3RgCW",h6:"h6_1UKhu","skeleton-loading":"skeleton-loading_3wvbo",skeletonLoading:"skeleton-loading_3wvbo",skeleton:"skeleton_3yQuF"}},386:function(t,e,n){t.exports={image:"image_2HoYb",border:"border_fvHwL",bg:"bg_OU_Qk","skeleton-loading":"skeleton-loading_W_WF0",skeletonLoading:"skeleton-loading_W_WF0",skeleton:"skeleton_3dcSj"}},387:function(t,e,n){t.exports={paragraph:"paragraph_1OWG2","skeleton-loading":"skeleton-loading_3Hgsp",skeletonLoading:"skeleton-loading_3Hgsp",skeleton:"skeleton_2H5RA"}},388:function(t,e,n){t.exports={list:"list_rxwoA","skeleton-loading":"skeleton-loading_hADmg",skeletonLoading:"skeleton-loading_hADmg",skeleton:"skeleton_3a9b2"}},389:function(t,e,n){t.exports={delimiter:"delimiter_3ksS5","skeleton-loading":"skeleton-loading_1lzJ0",skeletonLoading:"skeleton-loading_1lzJ0",skeleton:"skeleton_jIhh3"}},390:function(t,e,n){t.exports={checklist:"checklist_35Trq","skeleton-loading":"skeleton-loading_2NnRn",skeletonLoading:"skeleton-loading_2NnRn",skeleton:"skeleton_RKAJg"}},391:function(t,e,n){t.exports={link:"link_1cdqF",content:"content_31mUQ",logo:"logo_3t3p1","skeleton-loading":"skeleton-loading_Q1SbS",skeletonLoading:"skeleton-loading_Q1SbS",skeleton:"skeleton_13H0b"}},392:function(t,e,n){t.exports={video:"video_1Ktgc",wrap:"wrap_3iFmj","skeleton-loading":"skeleton-loading_DCN-u",skeletonLoading:"skeleton-loading_DCN-u",skeleton:"skeleton_1YNsK"}},393:function(t,e,n){t.exports={music:"music_1aU_y","skeleton-loading":"skeleton-loading_3yST_",skeletonLoading:"skeleton-loading_3yST_",skeleton:"skeleton_3Zagh"}},394:function(t,e,n){t.exports={baidu:"baidu_3yD19",logo:"logo_3fZIb",content:"content_2vYlq","skeleton-loading":"skeleton-loading_2_Vpm",skeletonLoading:"skeleton-loading_2_Vpm",skeleton:"skeleton_Yoxzs"}},395:function(t,e,n){t.exports={vote:"vote_1AMl_",selected:"selected_1h5XP",count:"count_3bLzQ",active:"active_2YTSY","skeleton-loading":"skeleton-loading_2BuFl",skeletonLoading:"skeleton-loading_2BuFl",skeleton:"skeleton_3B0sO"}},396:function(t,e,n){"use strict";var o=n(376);n.n(o).a},411:function(t,e,n){"use strict";n(22),n(33),n(72);e.a={beforeMount:function(){var t=this,e=function(){t.$store.getters.isMine(t.$route.params.slug)||t.$router.replace({name:t.$route.name,params:{slug:t.$store.state.user.slug}})};if(this.$store.state.isAuth)e();else var n=this.$watch("$store.state.isAuth",(function(t){t&&(e(),n())}))}}},416:function(t,e,n){"use strict";var o={name:"JsonHeader",props:{item:{type:Object,required:!0}},render:function(t){var e=this.item.data.level;return t("h"+this.item.data.level,{class:this.$style["h".concat(e)],domProps:{innerHTML:this.item.data.text}})}},r=n(424),l=n(9);var header=Object(l.a)(o,void 0,void 0,!1,(function(t){this.$style=r.default.locals||r.default}),null,null).exports,c={name:"JsonImage",props:{item:{type:Object,required:!0}}},h=n(425);var d=Object(l.a)(c,(function(){var t,e,n=this,o=n.$createElement,r=n._self._c||o;return r("div",{class:n.$style.image},[r("div",{class:[(t={},t[n.$style.border]=n.item.data.withBorder,t),(e={},e[n.$style.bg]=n.item.data.withBackground,e)]},[r("div",[r("VImg",{attrs:{src:n.item.data.file.url,stretched:n.item.data.stretched,width:n.item.data.file.width,height:n.item.data.file.height}})],1)]),n._v(" "),n.item.data.caption?r("p",{domProps:{textContent:n._s(n.item.data.caption)}}):n._e()])}),[],!1,(function(t){this.$style=h.default.locals||h.default}),null,null).exports,f={name:"JsonParagraph",props:{item:{type:Object,required:!0}}},m=n(426);var v=Object(l.a)(f,(function(){var t=this.$createElement;return(this._self._c||t)("p",{class:this.$style.paragraph,domProps:{innerHTML:this._s(this.item.data.text.replace(/\n/g,"<br>"))}})}),[],!1,(function(t){this.$style=m.default.locals||m.default}),null,null).exports,y={name:"JsonList",props:{item:{type:Object,required:!0}}},k=n(427);var w=Object(l.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.list},["ordered"===t.item.data.style?n("ol",t._l(t.item.data.items,(function(li,e){return n("li",{key:e,domProps:{innerHTML:t._s(li)}})})),0):n("ul",t._l(t.item.data.items,(function(li,e){return n("li",{key:e,domProps:{innerHTML:t._s(li)}})})),0)])}),[],!1,(function(t){this.$style=k.default.locals||k.default}),null,null).exports,_={name:"JsonDelimiter",props:{item:{type:Object,required:!0}}},T=n(428);var x=Object(l.a)(_,(function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.$style.delimiter})}),[],!1,(function(t){this.$style=T.default.locals||T.default}),null,null).exports,S={name:"JsonChecklist",props:{item:{type:Object,required:!0}}},C=n(429);var E=Object(l.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{class:t.$style.checklist},t._l(t.item.data.items,(function(option,e){return n("li",{key:e},[option.checked?n("i"):n("em"),t._v(" "),n("div",{domProps:{innerHTML:t._s(option.text)}})])})),0)}),[],!1,(function(t){this.$style=C.default.locals||C.default}),null,null).exports,P={name:"JsonLink",props:{item:{type:Object,required:!0}}},O=n(430);var $=Object(l.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.link},[n("a",{attrs:{target:"_blank",href:t.item.data.link}},[t.item.data.meta.image&&t.item.data.meta.image.url?n("img",{class:t.$style.logo,attrs:{src:t.item.data.meta.image.url,width:"65",height:"65"}}):t._e(),t._v(" "),n("div",{class:t.$style.content},[n("h3",{domProps:{textContent:t._s(t.item.data.meta.title)}}),t._v(" "),n("p",{domProps:{textContent:t._s(t.item.data.meta.description)}}),t._v(" "),n("span",{domProps:{textContent:t._s(t.item.data.link.replace(/https?:\/\//,""))}})])])])}),[],!1,(function(t){this.$style=O.default.locals||O.default}),null,null).exports,M={name:"JsonVideo",props:{item:{type:Object,required:!0}}},j=n(431);var video=Object(l.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.video},[n("div",{class:t.$style.wrap},[n("iframe",{attrs:{src:t.item.data.embed,scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowtransparency:"true",allowfullscreen:"true"}})]),t._v(" "),t.item.data.caption?n("p",{domProps:{textContent:t._s(t.item.data.caption)}}):t._e()])}),[],!1,(function(t){this.$style=j.default.locals||j.default}),null,null).exports,B={name:"JsonMusic",props:{item:{type:Object,required:!0}}},L=n(432);var D=Object(l.a)(B,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:this.$style.music},[e("iframe",{attrs:{src:this.item.data.embed,scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowtransparency:"true",allowfullscreen:"true",width:"330",height:"86"}}),this._v(" "),this.item.data.caption?e("p",{domProps:{textContent:this._s(this.item.data.caption)}}):this._e()])}),[],!1,(function(t){this.$style=L.default.locals||L.default}),null,null).exports,X={name:"JsonBaidu",props:{item:{type:Object,required:!0},reward:{type:Boolean,required:!0}}},R=n(433);var A=Object(l.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.baidu},[n("a",{attrs:{href:t.item.data.url,target:"_blank"}},[n("i",{staticClass:"iconfont ic-baidu-cloud",class:t.$style.logo}),t._v(" "),n("div",{class:t.$style.content},[0===t.item.data.visit_type||t.reward?[t._v(" 密码："+t._s(t.item.data.password)+" ")]:[t._v("\n        密码投食后可见\n      ")]],2)])])}),[],!1,(function(t){this.$style=R.default.locals||R.default}),null,null).exports,Y=(n(97),n(56),n(184),n(11),n(373),n(370)),H={name:"JsonVote",props:{item:{type:Object,required:!0},vote:{type:Array,required:!0},slug:{type:String,required:!0}},data:function(){return{selected:[],submitting:!1,voted:!1,stat:[],maxCount:0}},watch:{vote:function(t){this.selected=t.map((function(t){return t})),t.length&&(this.voted=!0,this.getVoteStat())}},methods:{getVoteStat:function(){var t=this;this.$axios.$get("v1/pin/vote_stat",{params:{slug:this.slug}}).then((function(data){t.stat=data,t.maxCount=Math.max.apply(Math,Object(Y.a)(Object.values(t.stat)))})).catch((function(){}))},handleSelect:function(option){var t=this.selected;if(!this.voted){var e=t.indexOf(option.id);if(~e)t.splice(e,1);else{var n=this.item.data.max_select;n<=t.length?1===n&&t.splice(e,1,option.id):t.push(option.id)}}},checkSelected:function(option){return~this.selected.indexOf(option.id)},submit:function(){var t=this;this.submitting||this.voted||(this.selected.length?this.item.data.expired_at&&1e3*this.item.data.expired_at<Date.now()?this.$toast.info("投票已截止"):(this.submitting=!0,this.$axios.$post("v1/social/vote",{pin_slug:this.slug,answer_hash:this.selected}).then((function(){t.$toast.success("投票成功"),t.voted=!0,t.getVoteStat()})).catch((function(e){t.$toast.error(e.message)})).finally((function(){t.submitting=!1}))):this.$toast.info("至少选择一项"))},computeItemStyle:function(option,t){var e=this.stat[option.id]||0;return{width:e?"".concat(75*e/this.maxCount,"%"):"0%",backgroundColor:this.getRandomColor(t)}},getRandomColor:function(t){return["rgba(255,170,170,.5)","rgba(255,148,39,.5)","rgba(252,196,25,.5)","rgba(32,201,151,.5)","rgba(18,183,245,.5)","rgba(173,181,189,.5)"][t%6]}}},z=n(434);var F=Object(l.a)(H,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{class:e.$style.vote},[o("div",[o("header",[e._v("投票（"+e._s(1===e.item.data.max_select?"单选":"最多选"+e.item.data.max_select+"个")+"）")]),e._v(" "),o("ul",e._l(e.item.data.items,(function(option,t){var n;return o("li",{key:option.id,staticClass:"oneline",class:(n={},n[e.$style.selected]=e.checkSelected(option),n),on:{click:function(t){return e.handleSelect(option)}}},[o("span",{class:e.$style.count,style:e.computeItemStyle(option,t),domProps:{innerHTML:e._s(e.stat[option.id]?e.stat[option.id]+"票&nbsp;&nbsp;":"")}}),e._v(" "),o("span",{domProps:{innerHTML:e._s(t+1+". "+option.text)}}),e._v(" "),o("i")])})),0),e._v(" "),o("footer",[o("span",[e._v("截止时间："+e._s(e.item.data.expired_at?e.$utils.timeAgo(e.item.data.expired_at):"无限期"))]),e._v(" "),o("button",{class:(t={},t[e.$style.active]=e.selected.length&&!e.voted,t),on:{click:e.submit}},[e._v("\n        "+e._s(e.submitting?"提交中":e.voted?"已投过票":"确认")+"\n      ")])])])])}),[],!1,(function(t){this.$style=z.default.locals||z.default}),null,null).exports,W=(n(32),n(181),n(33),n(39),n(73),n(369),n(371),n(28),n(94)),N=n(95),I=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.minLength,o=e.shareLink;Object(W.a)(this,t),this.config={org:"calibur",appendStr:"文章著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。",minLength:n||140,shareLink:o||window.location.href.split("?")[0]},this.prefix={org:"来源",link:"链接",author:"作者"}}return Object(N.a)(t,[{key:"bind",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.minLength,r=n.authorNickname,l=n.shareLink,c=n.appendStr;t.addEventListener("copy",(function(t){var n=o||e.config.minLength,h=l||e.config.shareLink,d=c||e.config.appendStr,f=window.getSelection().getRangeAt(0),m=e.getHTMLParser("");m&&m.appendChild(f.cloneContents());var v=f.toString().trim(),y=m?m.innerHTML:e.getRangeHtml(f);if(document.createElement("div").innerHTML=y,v.length>=n){var k=e.getCopyHtml(y,h,r,d),w=e.getCopyText(v,h,r,d);void 0===t.clipboardData&&e.hack(k,f);try{t.clipboardData.setData("text/plain",w),t.clipboardData.setData("text/html",k),t.preventDefault()}catch(t){e.hack(k,f)}}}))}},{key:"abort",value:function(t){t.addEventListener("copy",(function(t){return t.stopPropagation(),t.preventDefault(),t.cancelBubble=!1,!1}))}},{key:"hack",value:function(text,t){var e=document.createElement("div");e.innerHTML=text,e.style.position="fixed",e.style.left="-9999px",document.body.appendChild(e),window.getSelection().selectAllChildren(e),setTimeout((function(){try{window.getSelection().removeAllRanges(),window.getSelection().addRange(t)}catch(t){}document.body.removeChild(e)}),0)}},{key:"getCopyHtml",value:function(html,t,e,n){var o=this.getExtraCopyright(t,e,n).join("<br>");return"<div><div>".concat(html,"</div>").concat(o,"</div>")}},{key:"getCopyText",value:function(text,t,e,n){return text+this.getExtraCopyright(t,e,n).join("\n")}},{key:"getExtraCopyright",value:function(t,e,n){return e?["","","".concat(this.prefix.author,"：").concat(e),"".concat(this.prefix.link,"：").concat(t),"".concat(this.prefix.org,"：").concat(this.config.org),n]:["","","".concat(this.prefix.link,"：").concat(t),"".concat(this.prefix.org,"：").concat(this.config.org),n]}},{key:"getRangeHtml",value:function(text){var div=document.createElement("div");return div.appendChild(text.cloneContents()),div.outerHTML}},{key:"getHTMLParser",value:function(t){try{return(new window.DOMParser).parseFromString(t,"text/html").body}catch(n){var e=document.implementation.createHTMLDocument("");return e.body.innerHTML=t,e.body}}}]),t}(),K={name:"JsonContent",components:{"v-header":header,"v-image":d,"v-paragraph":v,"v-list":w,"v-delimiter":x,"v-checklist":E,"v-link":$,"v-video":video,"v-music":D,"v-baidu":A,"v-vote":F},props:{content:{required:!0,type:Array},reward:{type:Boolean,default:!1},vote:{type:Array,default:function(){return[]}},slug:{type:String,default:""}},mounted:function(){(new I).bind(this.$el)}},U=Object(l.a)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"json-content"},t._l(t.content,(function(e,o){return n("v-"+e.type,{key:o,tag:"component",attrs:{item:e,reward:t.reward,vote:t.vote,slug:t.slug}})})),1)}),[],!1,null,null,null);e.a=U.exports},424:function(t,e,n){"use strict";var o=n(385),r=n.n(o);e.default=r.a},425:function(t,e,n){"use strict";var o=n(386),r=n.n(o);e.default=r.a},426:function(t,e,n){"use strict";var o=n(387),r=n.n(o);e.default=r.a},427:function(t,e,n){"use strict";var o=n(388),r=n.n(o);e.default=r.a},428:function(t,e,n){"use strict";var o=n(389),r=n.n(o);e.default=r.a},429:function(t,e,n){"use strict";var o=n(390),r=n.n(o);e.default=r.a},430:function(t,e,n){"use strict";var o=n(391),r=n.n(o);e.default=r.a},431:function(t,e,n){"use strict";var o=n(392),r=n.n(o);e.default=r.a},432:function(t,e,n){"use strict";var o=n(393),r=n.n(o);e.default=r.a},433:function(t,e,n){"use strict";var o=n(394),r=n.n(o);e.default=r.a},434:function(t,e,n){"use strict";var o=n(395),r=n.n(o);e.default=r.a},436:function(t,e,n){t.exports=n.p+"img/no-comment.e82d3e7.png"},462:function(t,e,n){},463:function(t,e,n){},464:function(t,e,n){},465:function(t,e,n){},466:function(t,e,n){},467:function(t,e,n){},553:function(t,e,n){t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(object,t){return Object.prototype.hasOwnProperty.call(object,t)},n.p="/dist/",n(n.s=68)}({0:function(t,e,n){"use strict";function o(t,e,n,o,r,l,c,h){var d,f="function"==typeof t?t.options:t;if(e&&(f.render=e,f.staticRenderFns=n,f._compiled=!0),o&&(f.functional=!0),l&&(f._scopeId="data-v-"+l),c?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(c)},f._ssrRegister=d):r&&(d=h?function(){r.call(this,this.$root.$options.shadowRoot)}:r),d)if(f.functional){f._injectStyles=d;var m=f.render;f.render=function(t,e){return d.call(e),m(t,e)}}else{var v=f.beforeCreate;f.beforeCreate=v?[].concat(v,d):[d]}return{exports:t,options:f}}n.d(e,"a",(function(){return o}))},15:function(t,e){t.exports=n(186)},2:function(t,e){t.exports=n(130)},41:function(t,e){t.exports=n(554)},68:function(t,e,n){"use strict";n.r(e);var o=n(7),r=n.n(o),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-loading-fade"},on:{"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-loading-mask",class:[t.customClass,{"is-fullscreen":t.fullscreen}],style:{backgroundColor:t.background||""}},[n("div",{staticClass:"el-loading-spinner"},[t.spinner?n("i",{class:t.spinner}):n("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),t.text?n("p",{staticClass:"el-loading-text"},[t._v(t._s(t.text))]):t._e()])])])};l._withStripped=!0;var c={data:function(){return{text:null,spinner:null,background:null,fullscreen:!0,visible:!1,customClass:""}},methods:{handleAfterLeave:function(){this.$emit("after-leave")},setText:function(text){this.text=text}}},h=n(0),component=Object(h.a)(c,l,[],!1,null,null,null);component.options.__file="packages/loading/src/loading.vue";var d=component.exports,f=n(2),m=n(15),v=n(41),y=n.n(v),k=r.a.extend(d),w={install:function(t){if(!t.prototype.$isServer){var e=function(e,o){o.value?t.nextTick((function(){o.modifiers.fullscreen?(e.originalPosition=Object(f.getStyle)(document.body,"position"),e.originalOverflow=Object(f.getStyle)(document.body,"overflow"),e.maskStyle.zIndex=m.PopupManager.nextZIndex(),Object(f.addClass)(e.mask,"is-fullscreen"),n(document.body,e,o)):(Object(f.removeClass)(e.mask,"is-fullscreen"),o.modifiers.body?(e.originalPosition=Object(f.getStyle)(document.body,"position"),["top","left"].forEach((function(t){var n="top"===t?"scrollTop":"scrollLeft";e.maskStyle[t]=e.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]-parseInt(Object(f.getStyle)(document.body,"margin-"+t),10)+"px"})),["height","width"].forEach((function(t){e.maskStyle[t]=e.getBoundingClientRect()[t]+"px"})),n(document.body,e,o)):(e.originalPosition=Object(f.getStyle)(e,"position"),n(e,e,o)))})):(y()(e.instance,(function(t){if(e.instance.hiding){e.domVisible=!1;var n=o.modifiers.fullscreen||o.modifiers.body?document.body:e;Object(f.removeClass)(n,"el-loading-parent--relative"),Object(f.removeClass)(n,"el-loading-parent--hidden"),e.instance.hiding=!1}}),300,!0),e.instance.visible=!1,e.instance.hiding=!0)},n=function(e,n,o){n.domVisible||"none"===Object(f.getStyle)(n,"display")||"hidden"===Object(f.getStyle)(n,"visibility")?n.domVisible&&!0===n.instance.hiding&&(n.instance.visible=!0,n.instance.hiding=!1):(Object.keys(n.maskStyle).forEach((function(t){n.mask.style[t]=n.maskStyle[t]})),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(f.addClass)(e,"el-loading-parent--relative"),o.modifiers.fullscreen&&o.modifiers.lock&&Object(f.addClass)(e,"el-loading-parent--hidden"),n.domVisible=!0,e.appendChild(n.mask),t.nextTick((function(){n.instance.hiding?n.instance.$emit("after-leave"):n.instance.visible=!0})),n.domInserted=!0)};t.directive("loading",{bind:function(t,n,o){var r=t.getAttribute("element-loading-text"),l=t.getAttribute("element-loading-spinner"),c=t.getAttribute("element-loading-background"),h=t.getAttribute("element-loading-custom-class"),d=o.context,mask=new k({el:document.createElement("div"),data:{text:d&&d[r]||r,spinner:d&&d[l]||l,background:d&&d[c]||c,customClass:d&&d[h]||h,fullscreen:!!n.modifiers.fullscreen}});t.instance=mask,t.mask=mask.$el,t.maskStyle={},n.value&&e(t,n)},update:function(t,n){t.instance.setText(t.getAttribute("element-loading-text")),n.oldValue!==n.value&&e(t,n)},unbind:function(t,n){t.domInserted&&(t.mask&&t.mask.parentNode&&t.mask.parentNode.removeChild(t.mask),e(t,{value:!1,modifiers:n.modifiers})),t.instance&&t.instance.$destroy()}})}}},_=w,T=n(9),x=n.n(T),S=r.a.extend(d),C={text:null,fullscreen:!0,body:!1,lock:!1,customClass:""},E=void 0;S.prototype.originalPosition="",S.prototype.originalOverflow="",S.prototype.close=function(){var t=this;this.fullscreen&&(E=void 0),y()(this,(function(e){var n=t.fullscreen||t.body?document.body:t.target;Object(f.removeClass)(n,"el-loading-parent--relative"),Object(f.removeClass)(n,"el-loading-parent--hidden"),t.$el&&t.$el.parentNode&&t.$el.parentNode.removeChild(t.$el),t.$destroy()}),300),this.visible=!1};var P=function(t,e,n){var o={};t.fullscreen?(n.originalPosition=Object(f.getStyle)(document.body,"position"),n.originalOverflow=Object(f.getStyle)(document.body,"overflow"),o.zIndex=m.PopupManager.nextZIndex()):t.body?(n.originalPosition=Object(f.getStyle)(document.body,"position"),["top","left"].forEach((function(e){var n="top"===e?"scrollTop":"scrollLeft";o[e]=t.target.getBoundingClientRect()[e]+document.body[n]+document.documentElement[n]+"px"})),["height","width"].forEach((function(e){o[e]=t.target.getBoundingClientRect()[e]+"px"}))):n.originalPosition=Object(f.getStyle)(e,"position"),Object.keys(o).forEach((function(t){n.$el.style[t]=o[t]}))},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!r.a.prototype.$isServer){if("string"==typeof(t=x()({},C,t)).target&&(t.target=document.querySelector(t.target)),t.target=t.target||document.body,t.target!==document.body?t.fullscreen=!1:t.body=!0,t.fullscreen&&E)return E;var e=t.body?document.body:t.target,n=new S({el:document.createElement("div"),data:t});return P(t,e,n),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(f.addClass)(e,"el-loading-parent--relative"),t.fullscreen&&t.lock&&Object(f.addClass)(e,"el-loading-parent--hidden"),e.appendChild(n.$el),r.a.nextTick((function(){n.visible=!0})),t.fullscreen&&(E=n),n}};e.default={install:function(t){t.use(_),t.prototype.$loading=O},directive:_,service:O}},7:function(t,e){t.exports=n(0)},9:function(t,e){t.exports=n(75)}})},554:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t||!e)throw new Error("instance & callback is required");var r=!1,l=function(){r||(r=!0,e&&e.apply(null,arguments))};o?t.$once("after-leave",l):t.$on("after-leave",l),setTimeout((function(){l()}),n+100)}},555:function(t,e,n){"use strict";var o=n(462);n.n(o).a},556:function(t,e,n){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(o,s,function(e){return t[e]}.bind(null,s));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({5870:function(t,e,n){},"7f7f":function(t,e,n){"use strict";var o=n("5870");n.n(o).a},9520:function(t,e,n){"use strict";var o=n("da2c");n.n(o).a},da2c:function(t,e,n){},f6fd:function(t,e){!function(t){var e="currentScript",n=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(o){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(o.stack)||[!1])[1];for(t in n)if(n[t].src==e||"interactive"==n[t].readyState)return n[t];return null}}})}(document)},fb15:function(t,e,n){"use strict";var o;n.r(e),"undefined"!=typeof window&&(n("f6fd"),(o=window.document.currentScript)&&(o=o.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(n.p=o[1]));var r={name:"LoadingMsg"};function l(t,e,n,o,s,i,r,a){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),o&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=l):s&&(l=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}n("7f7f");var c={name:"MsgBubble",components:{LoadingMsg:l(r,(function(){var t=this;return t.$createElement,t._self._c,t._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading-msg"},[e("i",{staticClass:"dot"}),e("i",{staticClass:"dot"}),e("i",{staticClass:"dot"})])}],!1,null,null,null).exports},props:{color:{type:Object,required:!0},float:{type:String,required:!0,validator:function(t){return~["left","right"].indexOf(t)}},loading:{type:Boolean,required:!0},status:{type:String,required:!0}},computed:{wrapperStyle:function(){return{backgroundColor:this.color.bg,color:this.color.text}}}},h=(n("9520"),l(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"msg-box",class:"msg-box-"+t.float},[n("div",{staticClass:"msg-avatar"},[t._t("avatar")],2),n("div",{staticClass:"msg-body"},[t._t("header"),n("div",{staticClass:"msg-bubble",style:t.wrapperStyle},[t.loading?t._t("loading",[n("loading-msg")]):t._e(),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[t._t("default"),t.status?n("i",{staticClass:"msg-status",class:"msg-status-"+t.status}):t._e()],2)],2),t._t("footer")],2)])}),[],!1,null,null,null)).exports,d=l({name:"TextMsg",props:{item:{type:Object,required:!0}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"text-msg",domProps:{textContent:t._s(t.item.content)}})}),[],!1,null,null,null).exports,f=l({name:"ChatRoom",components:{Bubble:h},props:{avatarComponent:{type:Object,default:null},loadingComponent:{type:Object,default:null},messageComponents:{type:Object,default:function(){}},widgetComponents:{type:Object,default:function(){}},headerComponents:{type:Object,default:function(){}},footerComponents:{type:Object,default:function(){}},colors:{type:Array,default:function(){return[{bg:"#12b7f5",text:"#fff"},{bg:"#ff8eb3",text:"#fff"}]}}},data:function(){return{list:[],last_pending_id:0,resolver:null}},computed:{msgTypes:function(){return Object.assign({"text-msg":d},this.messageComponents)}},methods:{clearMessage:function(){this.list=[],this.last_pending_id=0,this.resolver=null},addMessage:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.type||"text-msg",o=t.id||Math.random().toString(10).substring(3,6),s=t.footer||"",i=t.header||"",r=t.loading||!1,a=t.pending||!1,l={id:o,isBubble:!0,message:this.msgTypes[n],header:i?this.headerComponents[i]:null,footer:s?this.footerComponents[s]:null,float:t.float||"left",color:this._computeBubbleColor(t),loading:r,status:t.status||"",item:t.data,next:null};e?this.list.push(l):this.list.unshift(l),r||a||this._handleResolve(t.data),a&&(this.last_pending_id=o,this._setResolve())},addWidget:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.type||"divide-line",o=t.id||Math.random().toString(10).substring(3,6),s={id:o,isBubble:!1,message:this.widgetComponents[n],item:t.data};e?this.list.push(s):this.list.unshift(s)},updateMessage:function(t,e){for(var n=this,o=function(o){if(n.list[o].id===t)return Object.keys(e).forEach((function(t){n.list[o][t]=e[t]})),"break"},s=this.list.length-1;s>=0&&"break"!==o(s);s--);},_setResolve:function(){var t=this;setTimeout((function(){t.last_pending_id&&t.list.forEach((function(e,n){e.id===t.last_pending_id&&(t.list[n].next=new Promise((function(e){t.resolver=e})))}))}),0)},_handleResolve:function(t){this.last_pending_id&&(this.resolver(t),this._setResolve())},_handleMsgLoaded:function(t){this.list[t].loading=!1,this.list[t].next||this._handleResolve(this.list[t].item)},_handleMsgResolve:function(t){this.last_pending_id===t&&(this.last_pending_id=0,this.resolver=null)},_computeBubbleColor:function(t){return t.color?t.color:t.data&&t.data.user&&t.data.user.id?this.colors[t.data.user.id%this.colors.length]:this.colors[t.id%this.colors.length]}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-room"},[t._l(t.list,(function(e,o){return[e.isBubble?n("Bubble",{key:o+"-"+e.id,attrs:{color:e.color,status:e.status,loading:e.loading,float:e.float}},[t.avatarComponent&&e.item.user?n(t.avatarComponent,{tag:"component",attrs:{slot:"avatar",item:e.item.user},slot:"avatar"}):t._e(),e.header&&e.item.user?n(e.header,{tag:"component",attrs:{slot:"header",item:e.item.user},slot:"header"}):t._e(),t.loadingComponent?n(t.loadingComponent,{tag:"component",attrs:{slot:"loading"},slot:"loading"}):t._e(),n(e.message,{key:e.id,tag:"component",attrs:{item:e.item,next:e.next},on:{loaded:function(e){return t._handleMsgLoaded(o)},resolve:function(n){return t._handleMsgResolve(e.id)}}}),e.footer?n(e.footer,{tag:"component",attrs:{slot:"footer",item:e.item},slot:"footer"}):t._e()],1):n(e.message,{key:e.id,tag:"component",attrs:{item:e.item}})]}))],2)}),[],!1,null,null,null).exports;e.default=f}}).default},557:function(t,e,n){},558:function(t,e,n){"use strict";var o=n(463);n.n(o).a},559:function(t,e,n){"use strict";var o=n(464);n.n(o).a},560:function(t,e,n){"use strict";var o=n(465);n.n(o).a},561:function(t,e,n){"use strict";var o=n(466);n.n(o).a},562:function(t,e,n){"use strict";var o=n(467);n.n(o).a},607:function(t,e,n){"use strict";n.r(e);n(32),n(22),n(13),n(14);var o=n(553),r=n.n(o),l=(n(21),n(2)),c=n(226),h={name:"MessageMenu",props:{slug:{type:String,required:!0}},data:function(){return{menuWatcher:null,timeWatcher:null,friends:[]}},computed:{menu:function(){return this.$store.state.messageMenu.list}},mounted:function(){var t=this;this.menuWatcher=this.$watch("$store.state.mailbox.unread_message_total",(function(e,n){e>n&&!t.$store.state.socket.isConnected&&t.$store.dispatch("getMessageMenu")})),this.timeWatcher=this.$watch("$store.state.messageMenu.time",(function(){t.$store.dispatch("updateMessageMenu")})),this.$store.dispatch("updateMessageMenu"),this.menu.length&&this.$store.state.socket.isConnected||this.initChatRoom()},beforeDestroy:function(){this.menuWatcher&&this.menuWatcher(),this.timeWatcher&&this.timeWatcher()},methods:{initChatRoom:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.a.service({target:t.$el}),e.next=3,t.getUserFriends();case 3:return e.next=5,t.$store.dispatch("getMessageMenu");case 5:n.close();case 6:case"end":return e.stop()}}),e)})))()},getUserFriends:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){Object(c.getUserRelation)({$axios:t.$axios,slug:t.slug,relation:"friend"}).then((function(data){data.result.forEach((function(e){return t.$cache.setUserSessionStore(e)})),t.friends=data.result,sessionStorage.setItem("user-friends-list",JSON.stringify(data.result))}))},e.prev=1,o=sessionStorage.getItem("user-friends-list")){e.next=7;break}return e.next=6,n();case 6:return e.abrupt("return");case 7:(r=JSON.parse(o)).forEach((function(e){return t.$cache.setUserSessionStore(e)})),t.friends=r,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,n();case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()},deleteChannel:function(t){var e=this;this.$axios.$post("v1/message/delete_channel",{channel:t.channel}).then((function(){e.$store.commit("DELETE_MESSAGE_MENU",t.channel)})).catch((function(){}))},emitClick:function(t){this.$emit("open",t)}}},d=(n(555),n(9)),f=Object(d.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"message-menu"},t._l(t.menu,(function(e){return n("li",{key:e.channel},[n("div",{staticClass:"room-item clearfix",on:{click:function(n){return t.emitClick(e)}}},[e.user.avatar?n("img",{staticClass:"avatar",attrs:{src:t.$resizeImage(e.user.avatar,{width:42}),alt:e.user.nickname}}):t._e(),t._v(" "),n("div",{staticClass:"content"},[n("p",{staticClass:"nickname oneline",domProps:{innerHTML:t._s(e.user.nickname)}}),t._v(" "),n("div",{staticClass:"footer"},[e.count?n("div",{staticClass:"read-badge",domProps:{textContent:t._s(e.count)}}):t._e()])])]),t._v(" "),n("div",{staticClass:"close",on:{click:function(n){return t.deleteChannel(e)}}},[t._v("\n      ×\n    ")])])})),0)}),[],!1,null,null,null).exports,m=(n(47),n(56),n(11),n(39),n(369),n(556)),v=n.n(m),y=(n(557),{name:"ChatAvatar",components:{UserAvatar:n(382).a},props:{item:{type:Object,required:!0}},computed:{isMine:function(){return this.$store.state.user.slug===this.item.slug}}}),k=(n(558),Object(d.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chat-avatar",class:[this.isMine?"chat-avatar-mine":"chat-avatar-other"]},[e("UserAvatar",{attrs:{user:this.item,size:36}})],1)}),[],!1,null,null,null).exports),w={name:"ChatMessage",components:{JsonContent:n(416).a},props:{item:{type:Object,required:!0}}},_=(n(559),Object(d.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chat-message"},[e("JsonContent",{attrs:{content:this.item.content}})],1)}),[],!1,null,null,null).exports),T=(n(182),n(28),function(t,b){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)});function x(t,b){function e(){this.constructor=t}T(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var S=function(){return(S=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function C(t){console.error("[BScroll warn]: "+t)}var E="undefined"!=typeof window,P=E&&navigator.userAgent.toLowerCase(),O=P&&/wechatdevtools/.test(P),$=P&&P.indexOf("android")>0;function M(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}function j(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i++){var source=e[i];for(var o in source)t[o]=source[o]}return t}function B(t){return null==t}var L=E&&document.createElement("div").style,D=function(){if(!E)return!1;var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==L[t[e]])return e;return!1}();function X(style){return!1===D?style:"standard"===D?"transitionEnd"===style?"transitionend":style:D+style.charAt(0).toUpperCase()+style.substr(1)}function R(t){return"string"==typeof t?document.querySelector(t):t}function A(t,e,n,o){t.addEventListener(e,n,{passive:!1,capture:!!o})}function Y(t,e,n,o){t.removeEventListener(e,n,{capture:!!o})}function H(t){for(var e=0,n=0;t;)e-=t.offsetLeft,n-=t.offsetTop,t=t.offsetParent;return{left:e,top:n}}D&&"standard"!==D&&D.toLowerCase();var z=X("transform"),F=X("transition"),W=E&&X("perspective")in L,N=E&&("ontouchstart"in window||O),I=E&&F in L,style={transform:z,transition:F,transitionTimingFunction:X("transitionTimingFunction"),transitionDuration:X("transitionDuration"),transitionDelay:X("transitionDelay"),transformOrigin:X("transformOrigin"),transitionEnd:X("transitionEnd")},K={touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2};function U(t){if(t instanceof window.SVGElement){var rect=t.getBoundingClientRect();return{top:rect.top,left:rect.left,width:rect.width,height:rect.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}function J(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1}var V=J;function Z(t,e){var n;void 0===e&&(e="click"),"mouseup"===t.type?n=t:"touchend"!==t.type&&"touchcancel"!==t.type||(n=t.changedTouches[0]);var o,r={};n&&(r.screenX=n.screenX||0,r.screenY=n.screenY||0,r.clientX=n.clientX||0,r.clientY=n.clientY||0);if("undefined"!=typeof MouseEvent)try{o=new MouseEvent(e,j({bubbles:!0,cancelable:!0},r))}catch(t){l()}else l();function l(){(o=document.createEvent("Event")).initEvent(e,!0,!0),j(o,r)}o.forwardedTouchEvent=!0,o._constructed=!0,t.target.dispatchEvent(o)}var Q={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(t){return 1+--t*t*t*t*t}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(t){return 1- --t*t*t*t}}},G=E&&window;function tt(){}var et=E?G.requestAnimationFrame||G.webkitRequestAnimationFrame||G.mozRequestAnimationFrame||G.oRequestAnimationFrame||function(t){return window.setTimeout(t,(t.interval||100/60)/2)}:tt,nt=E?G.cancelAnimationFrame||G.webkitCancelAnimationFrame||G.mozCancelAnimationFrame||G.oCancelAnimationFrame||function(t){window.clearTimeout(t)}:tt,ot=function(t){},it={enumerable:!0,configurable:!0,get:ot,set:ot};var st=function(){function t(t){this.events={},this.eventTypes={},this.registerType(t)}return t.prototype.on=function(t,e,n){return void 0===n&&(n=this),this.hasType(t),this.events[t]||(this.events[t]=[]),this.events[t].push([e,n]),this},t.prototype.once=function(t,e,n){var o=this;void 0===n&&(n=this),this.hasType(t);var r=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];o.off(t,r),e.apply(n,l)};return r.fn=e,this.on(t,r),this},t.prototype.off=function(t,e){if(!t&&!e)return this.events={},this;if(t){if(this.hasType(t),!e)return this.events[t]=[],this;var n=this.events[t];if(!n)return this;for(var o=n.length;o--;)(n[o][0]===e||n[o][0]&&n[o][0].fn===e)&&n.splice(o,1);return this}},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.hasType(t);var o=this.events[t];if(o)for(var r,l=o.length,c=o.slice(),i=0;i<l;i++){var h=c[i],d=h[0],f=h[1];if(d&&!0===(r=d.apply(f,e)))return r}},t.prototype.registerType=function(t){var e=this;t.forEach((function(t){e.eventTypes[t]=t}))},t.prototype.destroy=function(){this.events={},this.eventTypes={}},t.prototype.hasType=function(t){var e=this.eventTypes;e[t]===t||C('EventEmitter has used unknown event type: "'+t+'", should be oneof ['+Object.keys(e).map((function(t){return JSON.stringify(t)}))+"]")},t}(),at=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(A)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(Y)},t.prototype.handleDOMEvents=function(t){var e=this,n=this.wrapper;this.events.forEach((function(o){t(n,o.name,e,!!o.capture)}))},t.prototype.handleEvent=function(t){var e=t.type;this.events.some((function(n){return n.name===e&&(n.handler(t),!0)}))},t}(),lt=function(){function t(){this.startX=0,this.startY=0,this.scrollX=!1,this.scrollY=!0,this.freeScroll=!1,this.directionLockThreshold=5,this.eventPassthrough="",this.click=!1,this.dblclick=!1,this.tap="",this.bounce={top:!0,bottom:!0,left:!0,right:!0},this.bounceTime=800,this.momentum=!0,this.momentumLimitTime=300,this.momentumLimitDistance=15,this.swipeTime=2500,this.swipeBounceTime=500,this.deceleration=.0015,this.flickLimitTime=200,this.flickLimitDistance=100,this.resizePolling=60,this.probeType=0,this.stopPropagation=!1,this.preventDefault=!0,this.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},this.tagException={tagName:/^TEXTAREA$/},this.HWCompositing=!0,this.useTransition=!0,this.bindToWrapper=!1,this.disableMouse=N,this.disableTouch=!N,this.autoBlur=!0}return t.prototype.merge=function(t){if(!t)return this;for(var e in t)this[e]=t[e];return this},t.prototype.process=function(){return this.translateZ=this.HWCompositing&&W?" translateZ(0)":"",this.useTransition=this.useTransition&&I,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.resolveBounce(),this.scrollX="horizontal"!==this.eventPassthrough&&this.scrollX,this.scrollY="vertical"!==this.eventPassthrough&&this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=!!this.freeScroll||this.scrollX,this.scrollY=!!this.freeScroll||this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},t.prototype.resolveBounce=function(){var t=this.bounce;!1!==t&&!0!==t||(this.bounce=function(t,e){void 0===e&&(e=!0);var n={};return t.forEach((function(t){n[t]=e})),n}(["top","right","bottom","left"],t))},t}();var ct=function(){function t(t,e){this.wrapper=t,this.options=e,this.hooks=new st(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}return t.prototype.handleDOMEvents=function(){var t=this.options,e=t.bindToWrapper,n=t.disableMouse,o=t.disableTouch,r=t.click,l=this.wrapper,c=e?l:window,h=[],d=[],f=N&&!o,m=!n;r&&h.push({name:"click",handler:this.click.bind(this),capture:!0}),f&&(h.push({name:"touchstart",handler:this.start.bind(this)}),d.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),m&&(h.push({name:"mousedown",handler:this.start.bind(this)}),d.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new at(l,h),this.targetEventRegister=new at(c,d)},t.prototype.beforeHandler=function(t,e){var n=this.options,o=n.preventDefault,r=n.stopPropagation,l=n.preventDefaultException;({start:function(){return o&&!J(t.target,l)},end:function(){return o&&!J(t.target,l)},move:function(){return o}})[e]()&&t.preventDefault(),r&&t.stopPropagation()},t.prototype.setInitiated=function(t){void 0===t&&(t=0),this.initiated=t},t.prototype.start=function(t){var e=K[t.type];if(!this.initiated||this.initiated===e)if(this.setInitiated(e),V(t.target,this.options.tagException))this.setInitiated();else if((2!==e||0===t.button)&&!this.hooks.trigger(this.hooks.eventTypes.beforeStart,t)){this.beforeHandler(t,"start");var n=t.touches?t.touches[0]:t;this.pointX=n.pageX,this.pointY=n.pageY,this.hooks.trigger(this.hooks.eventTypes.start,t)}},t.prototype.move=function(t){if(K[t.type]===this.initiated){this.beforeHandler(t,"move");var e=t.touches?t.touches[0]:t,n=e.pageX-this.pointX,o=e.pageY-this.pointY;if(this.pointX=e.pageX,this.pointY=e.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:n,deltaY:o,e:t})){var r=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,l=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,c=this.pointX-r,h=this.pointY-l;(c>document.documentElement.clientWidth-this.options.momentumLimitDistance||c<this.options.momentumLimitDistance||h<this.options.momentumLimitDistance||h>document.documentElement.clientHeight-this.options.momentumLimitDistance)&&this.end(t)}}},t.prototype.end=function(t){K[t.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(t,"end"),this.hooks.trigger(this.hooks.eventTypes.end,t))},t.prototype.click=function(t){this.hooks.trigger(this.hooks.eventTypes.click,t)},t.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},t}(),ht={x:["translateX","px"],y:["translateY","px"]},ut=function(){function t(content){this.content=content,this.style=content.style,this.hooks=new st(["beforeTranslate","translate"])}return t.prototype.getComputedPosition=function(){var t=window.getComputedStyle(this.content,null)[style.transform].split(")")[0].split(", ");return{x:+(t[12]||t[4]),y:+(t[13]||t[5])}},t.prototype.translate=function(t){var e=[];Object.keys(t).forEach((function(n){if(ht[n]){var o=ht[n][0];if(o){var r=ht[n][1],l=t[n];e.push(o+"("+l+r+")")}}})),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,e,t),this.style[style.transform]=e.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,t)},t.prototype.destroy=function(){this.hooks.destroy()},t}(),pt=function(){function t(content,t,e){this.content=content,this.translater=t,this.options=e,this.hooks=new st(["move","end","beforeForceStop","forceStop","time","timeFunction"]),this.style=content.style}return t.prototype.translate=function(t){this.translater.translate(t)},t.prototype.setPending=function(t){this.pending=t},t.prototype.setForceStopped=function(t){this.forceStopped=t},t.prototype.destroy=function(){this.hooks.destroy(),nt(this.timer)},t}(),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x(e,t),e.prototype.startProbe=function(){var t=this,e=function(){var n=t.translater.getComputedPosition();t.hooks.trigger(t.hooks.eventTypes.move,n),t.pending?t.timer=et(e):t.hooks.trigger(t.hooks.eventTypes.end,n)};nt(this.timer),this.timer=et(e)},e.prototype.transitionTime=function(time){void 0===time&&(time=0),this.style[style.transitionDuration]=time+"ms",this.hooks.trigger(this.hooks.eventTypes.time,time)},e.prototype.transitionTimingFunction=function(t){this.style[style.transitionTimingFunction]=t,this.hooks.trigger(this.hooks.eventTypes.timeFunction,t)},e.prototype.move=function(t,e,time,n,o){this.setPending(time>0&&(t.x!==e.x||t.y!==e.y)),this.transitionTimingFunction(n),this.transitionTime(time),this.translate(e),time&&3===this.options.probeType&&this.startProbe(),time||(this._reflow=this.content.offsetHeight),time||o||(this.hooks.trigger(this.hooks.eventTypes.move,e),this.hooks.trigger(this.hooks.eventTypes.end,e))},e.prototype.stop=function(){if(this.pending){this.setPending(!1),nt(this.timer);var t=this.translater.getComputedPosition(),e=t.x,n=t.y;if(this.transitionTime(),this.translate({x:e,y:n}),this.setForceStopped(!0),this.hooks.trigger(this.hooks.eventTypes.beforeForceStop,{x:e,y:n}))return;this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:e,y:n})}},e}(pt),mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x(e,t),e.prototype.move=function(t,e,time,n,o){if(!time){if(this.translate(e),this._reflow=this.content.offsetHeight,o)return;return this.hooks.trigger(this.hooks.eventTypes.move,e),void this.hooks.trigger(this.hooks.eventTypes.end,e)}this.animate(t,e,time,n)},e.prototype.animate=function(t,e,n,o){var r=this,l=M(),c=l+n,h=function(){var d=M();if(d>=c)return r.translate(e),r.hooks.trigger(r.hooks.eventTypes.move,e),void r.hooks.trigger(r.hooks.eventTypes.end,e);var f=o(d=(d-l)/n),m={};Object.keys(e).forEach((function(n){var o=t[n],r=e[n];m[n]=(r-o)*f+o})),r.translate(m),r.pending&&(r.timer=et(h)),3===r.options.probeType&&r.hooks.trigger(r.hooks.eventTypes.move,m)};this.setPending(!0),nt(this.timer),h()},e.prototype.stop=function(){if(this.pending){this.setPending(!1),nt(this.timer);var t=this.translater.getComputedPosition();if(this.setForceStopped(!0),this.hooks.trigger(this.hooks.eventTypes.beforeForceStop,t))return;this.hooks.trigger(this.hooks.eventTypes.forceStop,t)}},e}(pt);var vt,gt,yt,bt,kt=function(){function t(t,e){this.wrapper=t,this.options=e,this.hooks=new st(["momentum","end"]),this.content=this.wrapper.children[0],this.currentPos=0,this.startPos=0}return t.prototype.start=function(){this.direction=0,this.movingDirection=0,this.dist=0},t.prototype.move=function(t){t=this.hasScroll?t:0,this.movingDirection=t>0?-1:t<0?1:0;var e=this.currentPos+t;return(e>this.minScrollPos||e<this.maxScrollPos)&&(e=e>this.minScrollPos&&this.options.bounces[0]||e<this.maxScrollPos&&this.options.bounces[1]?this.currentPos+t/3:e>this.minScrollPos?this.minScrollPos:this.maxScrollPos),e},t.prototype.end=function(t){var e={duration:0},n=Math.abs(this.currentPos-this.startPos);if(this.options.momentum&&t<this.options.momentumLimitTime&&n>this.options.momentumLimitDistance){var o=-1===this.direction&&this.options.bounces[0]||1===this.direction&&this.options.bounces[1]?this.wrapperSize:0;e=this.hasScroll?this.momentum(this.currentPos,this.startPos,t,this.maxScrollPos,this.minScrollPos,o,this.options):{destination:this.currentPos,duration:0}}else this.hooks.trigger(this.hooks.eventTypes.end,e);return e},t.prototype.momentum=function(t,e,time,n,o,r,l){void 0===l&&(l=this.options);var c=t-e,h=Math.abs(c)/time,d=l.deceleration,f=l.swipeBounceTime,m={destination:t+h/d*(c<0?-1:1),duration:l.swipeTime,rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,m,c),m.destination<n?(m.destination=r?Math.max(n-r/4,n-r/m.rate*h):n,m.duration=f):m.destination>o&&(m.destination=r?Math.min(o+r/4,o+r/m.rate*h):o,m.duration=f),m.destination=Math.round(m.destination),m},t.prototype.updateDirection=function(){var t=Math.round(this.currentPos)-this.absStartPos;this.direction=t>0?-1:t<0?1:0},t.prototype.refresh=function(){var t=this.options.rect,e=t.size,n=t.position,o="static"===window.getComputedStyle(this.wrapper,null).position,r=U(this.wrapper);this.wrapperSize=r[e];var l=U(this.content);this.contentSize=l[e],this.relativeOffset=l[n],o&&(this.relativeOffset-=r[n]),this.minScrollPos=0,this.maxScrollPos=this.wrapperSize-this.contentSize,this.maxScrollPos<0&&(this.maxScrollPos-=this.relativeOffset,this.minScrollPos=-this.relativeOffset),this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,this.hasScroll||(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize),this.direction=0},t.prototype.updatePosition=function(t){this.currentPos=t},t.prototype.getCurrentPos=function(){return Math.round(this.currentPos)},t.prototype.checkInBoundary=function(){var t=this.adjustPosition(this.currentPos);return{position:t,inBoundary:t===this.getCurrentPos()}},t.prototype.adjustPosition=function(t){var e=Math.round(t);return!this.hasScroll||e>this.minScrollPos?e=this.minScrollPos:e<this.maxScrollPos&&(e=this.maxScrollPos),e},t.prototype.updateStartPos=function(){this.startPos=this.currentPos},t.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},t.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},t.prototype.getAbsDist=function(t){return this.dist+=t,Math.abs(this.dist)},t.prototype.destroy=function(){this.hooks.destroy()},t}(),wt=((vt={}).yes=function(t){return!0},vt.no=function(t){return t.preventDefault(),!1},vt),_t=((gt={}).horizontal=((yt={}).yes="horizontal",yt.no="vertical",yt),gt.vertical=((bt={}).yes="vertical",bt.no="horizontal",bt),gt),Tt=function(){function t(t,e,n){this.directionLockThreshold=t,this.freeScroll=e,this.eventPassthrough=n,this.reset()}return t.prototype.reset=function(){this.directionLocked=""},t.prototype.checkMovingDirection=function(t,e,n){return this.computeDirectionLock(t,e),this.handleEventPassthrough(n)},t.prototype.adjustDelta=function(t,e){return"horizontal"===this.directionLocked?e=0:"vertical"===this.directionLocked&&(t=0),{deltaX:t,deltaY:e}},t.prototype.computeDirectionLock=function(t,e){""!==this.directionLocked||this.freeScroll||(t>e+this.directionLockThreshold?this.directionLocked="horizontal":e>=t+this.directionLockThreshold?this.directionLocked="vertical":this.directionLocked="none")},t.prototype.handleEventPassthrough=function(t){var e=_t[this.directionLocked];if(e){if(this.eventPassthrough===e.yes)return wt.yes(t);if(this.eventPassthrough===e.no)return wt.no(t)}return!1},t}(),xt=function(){function t(t,e,n,o,r){this.hooks=new st(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd"]),this.scrollBehaviorX=t,this.scrollBehaviorY=e,this.actionsHandler=n,this.animater=o,this.options=r,this.directionLockAction=new Tt(r.directionLockThreshold,r.freeScroll,r.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}return t.prototype.bindActionsHandler=function(){var t=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,(function(e){return!t.enabled||t.handleStart(e)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,(function(e){var n=e.deltaX,o=e.deltaY,r=e.e;return!t.enabled||t.handleMove(n,o,r)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,(function(e){return!t.enabled||t.handleEnd(e)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,(function(e){t.enabled&&!e._constructed&&t.handleClick(e)}))},t.prototype.handleStart=function(t){var e=M();this.moved=!1,this.startTime=e,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.stop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,t)},t.prototype.handleMove=function(t,e,n){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,n)){var o=this.scrollBehaviorX.getAbsDist(t),r=this.scrollBehaviorY.getAbsDist(e),l=M();if(this.checkMomentum(o,r,l))return!0;if(this.directionLockAction.checkMovingDirection(o,r,n))return this.actionsHandler.setInitiated(),!0;var c=this.directionLockAction.adjustDelta(t,e),h=this.scrollBehaviorX.move(c.deltaX),d=this.scrollBehaviorY.move(c.deltaY);this.moved||(this.moved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.animater.translate({x:h,y:d}),this.dispatchScroll(l)}},t.prototype.dispatchScroll=function(t){t-this.startTime>this.options.momentumLimitTime&&(this.startTime=t,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),1===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),this.options.probeType>1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},t.prototype.checkMomentum=function(t,e,n){return n-this.endTime>this.options.momentumLimitTime&&e<this.options.momentumLimitDistance&&t<this.options.momentumLimitDistance},t.prototype.handleEnd=function(t){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,t)){var e=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,t,e))return!0;this.animater.translate(e),this.endTime=M();var n=this.endTime-this.startTime;this.hooks.trigger(this.hooks.eventTypes.scrollEnd,e,n)}},t.prototype.handleClick=function(t){J(t.target,this.options.preventDefaultException)||(t.preventDefault(),t.stopPropagation())},t.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},t.prototype.refresh=function(){this.endTime=0},t.prototype.destroy=function(){this.hooks.destroy()},t}();function St(t,e,n,rect){var o=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime"].reduce((function(e,n){return e[n]=t[n],e}),{});return o.scrollable=t[e],o.bounces=n,o.rect=rect,o}function Ct(source,t,e){e.forEach((function(e){var n,o;"string"==typeof e?n=o=e:(n=e.source,o=e.target),source.on(n,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.trigger.apply(t,[o].concat(e))}))}))}var Et=function(){function t(t,e){this.hooks=new st(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","refresh","touchEnd","end","flick","scrollCancel","momentum","scrollTo","ignoreDisMoveForSamePos","scrollToElement","resize"]),this.wrapper=t,this.content=t.children[0],this.options=e;var n,o=this.options.bounce,r=o.left,l=void 0===r||r,c=o.right,h=void 0===c||c,d=o.top,f=void 0===d||d,m=o.bottom,v=void 0===m||m;this.scrollBehaviorX=new kt(t,St(e,"scrollX",[l,h],{size:"width",position:"left"})),this.scrollBehaviorY=new kt(t,St(e,"scrollY",[f,v],{size:"height",position:"top"})),this.translater=new ut(this.content),this.animater=function(element,t,e){var n=e.useTransition,o={};return Object.defineProperty(o,"probeType",{enumerable:!0,configurable:!1,get:function(){return e.probeType}}),n?new ft(element,t,o):new mt(element,t,o)}(this.content,this.translater,this.options),this.actionsHandler=new ct(t,(n=this.options,["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException"].reduce((function(t,e){return t[e]=n[e],t}),{}))),this.actions=new xt(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);var y=this.resize.bind(this);this.resizeRegister=new at(window,[{name:"orientationchange",handler:y},{name:"resize",handler:y}]),this.transitionEndRegister=new at(this.content,[{name:style.transitionEnd,handler:this.transitionEnd.bind(this)}]),this.init()}return t.prototype.init=function(){var t=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,(function(){t.togglePointerEvents(!0)}))},t.prototype.bindTranslater=function(){var t=this,e=this.translater.hooks;e.on(e.eventTypes.beforeTranslate,(function(e){t.options.translateZ&&e.push(t.options.translateZ)})),e.on(e.eventTypes.translate,(function(e){t.updatePositions(e),t.togglePointerEvents(!1)}))},t.prototype.bindAnimater=function(){var t=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,(function(e){t.resetPosition(t.options.bounceTime)||(t.animater.setPending(!1),t.hooks.trigger(t.hooks.eventTypes.scrollEnd,e))})),Ct(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},t.prototype.bindActions=function(){var t=this,e=this.actions;Ct(e.hooks,this.hooks,[{source:e.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:e.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:e.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:e.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:e.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:e.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),e.hooks.on(e.hooks.eventTypes.end,(function(n,o){return t.hooks.trigger(t.hooks.eventTypes.touchEnd,o),!!t.hooks.trigger(t.hooks.eventTypes.end,o)||(!e.moved&&t.checkClick(n)?(t.animater.setForceStopped(!1),t.hooks.trigger(t.hooks.eventTypes.scrollCancel),!0):(t.animater.setForceStopped(!1),!!t.resetPosition(t.options.bounceTime,Q.bounce)||void 0))})),e.hooks.on(e.hooks.eventTypes.scrollEnd,(function(e,n){var o=Math.abs(e.x-t.scrollBehaviorX.startPos),r=Math.abs(e.y-t.scrollBehaviorY.startPos);t.checkFlick(n,o,r)?t.hooks.trigger(t.hooks.eventTypes.flick):t.momentum(e,n)||t.hooks.trigger(t.hooks.eventTypes.scrollEnd,e)}))},t.prototype.checkFlick=function(t,e,n){if(this.hooks.events.flick.length>1&&t<this.options.flickLimitTime&&e<this.options.flickLimitDistance&&n<this.options.flickLimitDistance)return!0},t.prototype.momentum=function(t,e){var meta={time:0,easing:Q.swiper,newX:t.x,newY:t.y},n=this.scrollBehaviorX.end(e),o=this.scrollBehaviorY.end(e);if(meta.newX=B(n.destination)?meta.newX:n.destination,meta.newY=B(o.destination)?meta.newY:o.destination,meta.time=Math.max(n.duration,o.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,meta,this),meta.newX!==t.x||meta.newY!==t.y)return(meta.newX>this.scrollBehaviorX.minScrollPos||meta.newX<this.scrollBehaviorX.maxScrollPos||meta.newY>this.scrollBehaviorY.minScrollPos||meta.newY<this.scrollBehaviorY.maxScrollPos)&&(meta.easing=Q.swipeBounce),this.scrollTo(meta.newX,meta.newY,meta.time,meta.easing),!0},t.prototype.checkClick=function(t){var e=this.animater.forceStopped;if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return!0;if(!e){var n=this.options.dblclick,o=!1;if(n&&this.lastClickTime){var r=n.delay,l=void 0===r?300:r;M()-this.lastClickTime<l&&(o=!0,function(t){Z(t,"dblclick")}(t))}return this.options.tap&&function(t,e){var n=document.createEvent("Event");n.initEvent(e,!0,!0),n.pageX=t.pageX,n.pageY=t.pageY,t.target.dispatchEvent(n)}(t,this.options.tap),this.options.click&&!J(t.target,this.options.preventDefaultException)&&Z(t),this.lastClickTime=o?null:M(),!0}return!1},t.prototype.resize=function(){var t=this;this.actions.enabled&&($&&(this.wrapper.scrollTop=0),this.hooks.trigger(this.hooks.eventTypes.resize)||(clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout((function(){t.refresh()}),this.options.resizePolling)))},t.prototype.transitionEnd=function(t){t.target===this.content&&this.animater.pending&&(this.animater.transitionTime(),this.resetPosition(this.options.bounceTime,Q.bounce)||(this.animater.setPending(!1),3!==this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos())))},t.prototype.togglePointerEvents=function(t){void 0===t&&(t=!0);for(var e=this.content.children.length?this.content.children:[this.content],n=t?"auto":"none",i=0;i<e.length;i++){var o=e[i];o.isBScrollContainer||(o.style.pointerEvents=n)}},t.prototype.refresh=function(){this.scrollBehaviorX.refresh(),this.scrollBehaviorY.refresh(),this.actions.refresh(),this.wrapperOffset=H(this.wrapper)},t.prototype.scrollBy=function(t,e,time,n){void 0===time&&(time=0);var o=this.getCurrentPos(),r=o.x,l=o.y;n=n||Q.bounce,t+=r,e+=l,this.scrollTo(t,e,time,n)},t.prototype.scrollTo=function(t,e,time,n,o,r){void 0===time&&(time=0),void 0===o&&(o={start:{},end:{}}),n=n||Q.bounce;var l=this.options.useTransition?n.style:n.fn,c=this.getCurrentPos(),h=S({x:c.x,y:c.y},o.start),d=S({x:t,y:e},o.end);this.hooks.trigger(this.hooks.eventTypes.scrollTo,d),(this.hooks.trigger(this.hooks.eventTypes.ignoreDisMoveForSamePos)||h.x!==d.x||h.y!==d.y)&&this.animater.move(h,d,time,l,r)},t.prototype.scrollToElement=function(t,time,e,n,o){var r=R(t),l=H(r),c=function(t,e,n){return"number"==typeof t?t:t?Math.round(e/2-n/2):0};e=c(e,r.offsetWidth,this.wrapper.offsetWidth),n=c(n,r.offsetHeight,this.wrapper.offsetHeight);var h=function(t,e,n,o){return t-=e,t=o.adjustPosition(t-n)};l.left=h(l.left,this.wrapperOffset.left,e,this.scrollBehaviorX),l.top=h(l.top,this.wrapperOffset.top,n,this.scrollBehaviorY),this.hooks.trigger(this.hooks.eventTypes.scrollToElement,r,l)||this.scrollTo(l.left,l.top,time,o)},t.prototype.resetPosition=function(time,t){void 0===time&&(time=0),t=t||Q.bounce;var e=this.scrollBehaviorX.checkInBoundary(),n=e.position,o=e.inBoundary,r=this.scrollBehaviorY.checkInBoundary(),l=r.position,c=r.inBoundary;return(!o||!c)&&(this._reflow=this.content.offsetHeight,this.scrollTo(n,l,time,t),!0)},t.prototype.updatePositions=function(t){this.scrollBehaviorX.updatePosition(t.x),this.scrollBehaviorY.updatePosition(t.y)},t.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},t.prototype.enable=function(){this.actions.enabled=!0},t.prototype.disable=function(){nt(this.animater.timer),this.actions.enabled=!1},t.prototype.destroy=function(){var t=this;["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"].forEach((function(e){return t[e].destroy()}))},t}(),Pt=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}],Ot=function(t){function e(e,n){var o=t.call(this,["refresh","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,r=R(e);return r?r.children[0]?(o.plugins={},o.options=(new lt).merge(n).process(),o.hooks=new st(["init","refresh","enable","disable","destroy"]),o.init(r),o):(C("The wrapper need at least one child element to be scroller."),o):(C("Can not resolve the wrapper DOM."),o)}return x(e,t),e.use=function(t){var e=t.pluginName;return this.plugins.some((function(e){return t===e.ctor}))?this:B(e)?(C("Plugin Class must specify plugin's name in static property by 'pluginName' field."),this):this.pluginsMap[e]?(C("This plugin has been registered, maybe you need change plugin's name"),this):(this.pluginsMap[e]=!0,this.plugins.push({name:e,applyOrder:t.applyOrder,ctor:t}),this)},e.prototype.init=function(t){this.wrapper=t,t.isBScrollContainer=!0,this.scroller=new Et(t,this.options),this.eventBubbling(),this.handleAutoBlur(),this.innerRefresh(),this.scroller.scrollTo(this.options.startX,this.options.startY),this.enable(),this.proxy(Pt),this.applyPlugins()},e.prototype.applyPlugins=function(){var t=this,e=this.options;this.constructor.plugins.sort((function(a,b){var t,e=((t={}).pre=-1,t.post=1,t);return(a.applyOrder?e[a.applyOrder]:0)-(b.applyOrder?e[b.applyOrder]:0)})).forEach((function(n){var o=n.ctor;e[n.name]&&"function"==typeof o&&(t.plugins[n.name]=new o(t))}))},e.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,(function(){var t=document.activeElement;!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName||t.blur()}))},e.prototype.eventBubbling=function(){Ct(this.scroller.hooks,this,["beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick"])},e.prototype.innerRefresh=function(){this.scroller.refresh(),this.hooks.trigger(this.hooks.eventTypes.refresh),this.trigger(this.eventTypes.refresh)},e.prototype.proxy=function(t){var e=this;t.forEach((function(t){var n=t.key,o=t.sourceKey;!function(t,e,n){it.get=function(){return function(t,e){for(var n=e.split("."),i=0;i<n.length-1;i++)if("object"!=typeof(t=t[n[i]])||!t)return;var o=n.pop();return"function"==typeof t[o]?function(){return t[o].apply(t,arguments)}:t[o]}(this,e)},it.set=function(t){!function(t,e,n){for(var o,r=e.split("."),i=0;i<r.length-1;i++)t[o=r[i]]||(t[o]={}),t=t[o];t[r.pop()]=n}(this,e,t)},Object.defineProperty(t,n,it)}(e,o,n)}))},e.prototype.refresh=function(){this.innerRefresh(),this.scroller.resetPosition()},e.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},e.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},e.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},e.prototype.eventRegister=function(t){this.registerType(t)},e.plugins=[],e.pluginsMap={},e}(st);var $t="undefined"!=typeof window,Mt=$t&&navigator.userAgent.toLowerCase();Mt&&/wechatdevtools/.test(Mt),Mt&&Mt.indexOf("android");function jt(t,e,n){return t<e?e:t>n?n:t}var Bt=$t&&document.createElement("div").style,Lt=function(){if(!$t)return!1;var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==Bt[t[e]])return e;return!1}();function Dt(style){return!1===Lt?style:"standard"===Lt?"transitionEnd"===style?"transitionend":style:Lt+style.charAt(0).toUpperCase()+style.substr(1)}function Xt(t,e,n,o){t.addEventListener(e,n,{passive:!1,capture:!!o})}function Rt(t,e,n,o){t.removeEventListener(e,n,{capture:!!o})}Lt&&"standard"!==Lt&&Lt.toLowerCase(),Dt("transform"),Dt("transition"),$t&&Dt("perspective"),Dt("transitionTimingFunction"),Dt("transitionDuration"),Dt("transitionDelay"),Dt("transformOrigin"),Dt("transitionEnd");var At=$t&&window;function Yt(){}$t&&(At.requestAnimationFrame||At.webkitRequestAnimationFrame||At.mozRequestAnimationFrame||At.oRequestAnimationFrame),$t&&(At.cancelAnimationFrame||At.webkitCancelAnimationFrame||At.mozCancelAnimationFrame||At.oCancelAnimationFrame);var Ht=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(Xt)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(Rt)},t.prototype.handleDOMEvents=function(t){var e=this,n=this.wrapper;this.events.forEach((function(o){t(n,o.name,e,!!o.capture)}))},t.prototype.handleEvent=function(t){var e=t.type;this.events.some((function(n){return n.name===e&&(n.handler(t),!0)}))},t}(),zt=function(){function t(t){this.scroll=t,this.wheelStart=!1,t.registerType(["mousewheelMove","mousewheelStart","mousewheelEnd"]),this.mouseWheelOpt=t.options.mouseWheel,this.deltaCache=[],this.registorEvent(),this.hooksFn=[],this.registorHooks(t.hooks,"destroy",this.destroy)}return t.prototype.destroy=function(){this.eventRegistor.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach((function(t){var e=t[0],n=t[1],o=t[2];e.off(n,o)}))},t.prototype.registorEvent=function(){this.eventRegistor=new Ht(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},t.prototype.wheelHandler=function(t){this.beforeHandler(t),this.wheelStart||(this.wheelStartHandler(t),this.wheelStart=!0);var e=this.getWheelDelta(t);this.wheelMove(e),this.wheelStopDetactor(t,e)},t.prototype.wheelStartHandler=function(t){this.deltaCache=[],this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},t.prototype.wheelStopDetactor=function(t,e){var n=this;window.clearTimeout(this.wheelEndTimer);var o=this.mouseWheelOpt.throttle||400;this.wheelEndTimer=window.setTimeout((function(){n.wheelStart=!1,window.clearTimeout(n.wheelMoveTimer),n.wheelMoveTimer=0,n.scroll.trigger(n.scroll.eventTypes.mousewheelEnd,e)}),o)},t.prototype.getWheelDelta=function(t){var e=this.mouseWheelOpt,n=e.speed,o=void 0===n?20:n,r=e.invert,l=0,c=0,h=void 0!==r&&r?-1:1;switch(!0){case"deltaX"in t:1===t.deltaMode?(l=-t.deltaX*o,c=-t.deltaY*o):(l=-t.deltaX,c=-t.deltaY);break;case"wheelDeltaX"in t:l=t.wheelDeltaX/120*o,c=t.wheelDeltaY/120*o;break;case"wheelDelta"in t:l=c=t.wheelDelta/120*o;break;case"detail"in t:l=c=-t.detail/3*o}return l*=h,c*=h,this.scroll.scroller.scrollBehaviorY.hasScroll||(l=c,c=0),this.scroll.scroller.scrollBehaviorX.hasScroll||(l=0),{x:l,y:c,directionX:l>0?-1:l<0?1:0,directionY:c>0?-1:c<0?1:0}},t.prototype.beforeHandler=function(t){var e=this.scroll.options,n=e.preventDefault,o=e.stopPropagation,r=e.preventDefaultException;n&&!function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1}(t.target,r)&&t.preventDefault(),o&&t.stopPropagation()},t.prototype.wheelMove=function(t){var e=this;if(this.mouseWheelOpt.debounce&&this.wheelMoveTimer)this.deltaCache.push(t);else{var n=this.deltaCache.reduce((function(t,e){return{x:t.x+e.x,y:t.y+e.y}}),{x:0,y:0});this.deltaCache=[];var o=this.scroll.x+Math.round(t.x)+n.x,r=this.scroll.y+Math.round(t.y)+n.y,l=this.scroll.scroller.scrollBehaviorX,c=this.scroll.scroller.scrollBehaviorY;if(o=jt(o,l.maxScrollPos,l.minScrollPos),r=jt(r,c.maxScrollPos,c.minScrollPos),!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:o,y:r})){var h=this.getEaseTime();o===this.scroll.x&&r===this.scroll.y||this.scroll.scrollTo(o,r,h)}this.mouseWheelOpt.debounce&&(this.wheelMoveTimer=window.setTimeout((function(){e.wheelMoveTimer=0}),this.mouseWheelOpt.debounce))}},t.prototype.registorHooks=function(t,e,n){t.on(e,n,this),this.hooksFn.push([t,e,n])},t.prototype.getEaseTime=function(){var t,e=this.mouseWheelOpt.easeTime||300;return e<100&&(t="easeTime should be greater than 100.\n      If mouseWheel easeTime is too small, scrollEnd will be triggered many times.",console.error("[BScroll warn]: "+t)),e},t.pluginName="mouseWheel",t.applyOrder="pre",t}(),Ft={name:"VScroll",props:{probeType:{type:Number,default:1},click:{type:Boolean,default:!0},data:{type:Array,default:null},scrollX:{type:Boolean,default:!1}},watch:{data:function(){this.refresh()}},mounted:function(){var t=this;setTimeout((function(){t._initScroll()}),20)},beforeDestroy:function(){this.scroll&&this.scroll.destroy()},methods:{_initScroll:function(){var t=this;this.$refs.wrapper&&(Ot.use(zt),this.scroll=new Ot(this.$refs.wrapper,{probeType:this.probeType,click:this.click,fade:!0,scrollX:this.scrollX,scrollY:!this.scrollX,mouseWheel:{invert:!1,speed:30,easeTime:300}}),this.scroll.on("scrollEnd",(function(){t.scroll.y>-50&&t.$emit("top"),t.scroll.y<=t.scroll.maxScrollY+50&&t.$emit("bottom")})))},enable:function(){this.scroll&&this.scroll.enable()},disable:function(){this.scroll&&this.scroll.disable()},refresh:function(){var t=this;return new Promise((function(e){t.$nextTick((function(){setTimeout((function(){t.scroll&&t.scroll.refresh(),t.$nextTick((function(){e()}))}),20)}))}))},scrollTo:function(){var t=arguments,e=this;setTimeout((function(){e.scroll&&e.scroll.scrollTo.apply(e.scroll,t)}),0)},scrollToElement:function(){var t=arguments,e=this;setTimeout((function(){e.scroll&&e.scroll.scrollToElement.apply(e.scroll,t)}),0)}}},qt=(n(560),{name:"MessageRoom",components:{Scroll:Object(d.a)(Ft,(function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"wrapper",staticClass:"scroll-warp"},[this._t("default")],2)}),[],!1,null,null,null).exports,ChatRoom:v.a},props:{mailto:{type:String,required:!0},name:{type:String,required:!0},slug:{type:String,required:!0}},data:function(){return{message:"",target:null,chatsHeight:0,stopWatcher:null,noMore:!1}},computed:{query:function(){return{channel:this.mailto,$axios:this.$axios}},avatarComp:function(){return k},messageComps:function(){return{message:_}},computeHelperTxt:function(){return"undefined"==typeof window?"":/windows/.test(window.navigator.userAgent.toLocaleLowerCase())?"按下Ctrl+Enter换行":"按下Cmd+Enter换行"}},watch:{$route:function(){this.initRoom()}},beforeMount:function(){this.$store.state.messageRoom[this.mailto]||this.$store.commit("INIT_MESSAGE_ROOM",this.mailto)},mounted:function(){this.initRoom()},methods:{initRoom:function(){var t=this;this.$nextTick(Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$refs.room&&t.$refs.room.clearMessage(),t.$refs.loader&&t.$refs.loader.forceCallback(),e.next=4,t.$refs.loader.initData({is_up:1});case 4:return e.next=6,t.$refs.loader.loadMore({force:!0});case 6:t.clearUnreadCount(),t.watchMessageLoop();case 8:case"end":return e.stop()}}),e)}))))},clearUnreadCount:function(){var t=this,menu=this.$store.state.messageMenu.list.filter((function(e){return e.channel===t.mailto}))[0];!menu||menu.count<=0||(this.$axios.$post("v1/message/clear_channel",{channel:this.mailto}),this.$store.commit("CLEAR_NOTIFICATION",{channel:this.mailto,count:menu.count}))},watchMessageLoop:function(){this.stopWatcher&&this.stopWatcher();var t=this,e=t.mailto;this.stopWatcher=this.$watch((function(){return t.$store.state.messageRoom[t.mailto].time}),(function(){if(e===t.mailto){var n=t.$store.state.messageRoom[t.mailto].data;t.$store.state.socket.isConnected&&n?t.appendMessage(n):t.$refs.loader.loadMore({force:!0}),t.screenScroll(),t.clearUnreadCount()}else this.stopWatcher()}))},handleScrollUp:function(){this.noMore||this.$refs.loader.loadBefore({force:!0})},handleMessageLoad:function(t){var e=this,data=t.data,n=t.params;0!==n.is_up||data.result.length||(this.noMore=!0),this.$nextTick((function(){1===n.is_up?(data.result.map((function(t){return t})).reverse().map((function(t){e.appendMessage(t,!1)})),e.screenScroll(!1)):(data.result.map((function(t){e.appendMessage(t)})),e.screenScroll())}))},screenScroll:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs.scroll&&this.$refs.scroll.refresh().then((function(){var n=t.$refs.room.$el.clientHeight,o=t.$refs.wrap.clientHeight;n<o||(t.lastChatsHeight&&!e?t.$refs.scroll.scrollTo(0,t.lastChatsHeight-n):t.$refs.scroll.scrollTo(0,o-n),t.lastChatsHeight=n)}))},appendMessage:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.$refs.room.addMessage({id:t.id,type:"message",float:t.user.slug===this.slug?"right":"left",color:2===t.user.sex?{bg:"#ff6881",text:"#fff"}:{bg:"#12b7f5",text:"#fff"},data:t},e)},handleAddBubble:function(){var t=this;if(this.message.trim()){var e=[{type:"paragraph",data:{text:this.message.trim()}}],n=Math.random().toString(10).substring(3,6);this.appendMessage({id:n,user:this.$store.state.user,content:e,created_at:Date.now()}),this.screenScroll(),this.message="",this.$axios.$post("v1/message/send",{channel:this.mailto,content:e}).then((function(e){t.$refs.room.updateMessage(n,{id:e.id}),t.$refs.loader.append(e)})).catch((function(){t.$refs.room.updateMessage(n,{status:"error"})}))}},handleNewLine:function(){this.message&&(this.message+="\n")}}}),Wt=(n(561),Object(d.a)(qt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"room"},[n("div",{staticClass:"room-header"},[t._v("\n    "+t._s(t.name)+"\n  ")]),t._v(" "),n("FlowLoader",{ref:"loader",staticClass:"room-body",attrs:{func:"getUserMessage",type:"sinceId",query:t.query,callback:t.handleMessageLoad,"callback-once":!1,"cache-timeout":86400,auto:0},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.flow;return n("div",{ref:"wrap",staticClass:"room-chats"},[n("Scroll",{ref:"scroll",attrs:{data:o},on:{top:t.handleScrollUp}},[n("ChatRoom",{ref:"room",attrs:{"avatar-component":t.avatarComp,"message-components":t.messageComps}})],1)],1)}}])}),t._v(" "),n("div",{staticClass:"room-footer"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{maxlength:"500",placeholder:"say it..."},domProps:{value:t.message},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.handleAddBubble(e))},function(e){return e.ctrlKey?e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.handleAddBubble(e)):null}],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.metaKey?(e.preventDefault(),t.handleNewLine(e)):null},input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),n("div",{staticClass:"helper"},[n("span",{domProps:{textContent:t._s(t.computeHelperTxt)}}),t._v(" "),n("button",{on:{click:t.handleAddBubble}},[t._v("\n        发送\n      ")])])])],1)}),[],!1,null,null,null).exports),Nt=n(411),It={name:"UserMessage",components:{MessageMenu:f,MessageRoom:Wt},mixins:[n(383).a,Nt.a],props:{slug:{type:String,required:!0}},computed:{mailto:function(){return this.$route.query.mailto},name:function(){return this.$route.query.name}},methods:{handleOpen:function(t){this.$router.push(this.$alias.user(this.slug,"message/?mailto=".concat(t.channel,"&name=").concat(t.user.nickname)))}}},Kt=(n(562),Object(d.a)(It,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"user-message"}},[o("ElRow",{staticClass:"column-wrap"},[o("ElCol",{attrs:{span:6}},[o("MessageMenu",{attrs:{slug:t.slug},on:{open:t.handleOpen}}),t._v("\n       \n    ")],1),t._v(" "),o("ElCol",{attrs:{span:18}},[o("div",{staticClass:"room-adjust"},[t.mailto?o("MessageRoom",{attrs:{mailto:t.mailto,name:t.name,slug:t.slug}}):o("div",{staticClass:"need-pick"},[o("img",{attrs:{src:n(436)}}),t._v(" "),o("p",[t._v("未选择聊天")])])],1)])],1)],1)}),[],!1,null,null,null));e.default=Kt.exports}}]);