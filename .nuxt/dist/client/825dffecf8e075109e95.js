(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{360:function(t,e,n){},373:function(t,e,n){"use strict";n(173);var o={name:"UserAvatar",props:{user:{type:Object,required:!0},avatar:{type:String,default:""},size:{type:Number,default:40},disabled:{type:Boolean,default:!1}}},l=(n(382),n(7)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.disabled?n("div",{staticClass:"user-avatar",style:{width:t.size+"px",height:t.size+"px"}},[n("VImg",{attrs:{radius:"50%",src:t.avatar||t.user.avatar,width:t.size,height:t.size,alt:t.user.nickname}})],1):n("NLink",{staticClass:"user-avatar",style:{width:t.size+"px",height:t.size+"px"},attrs:{to:t.$alias.user(t.user.slug),target:"_blank"}},[n("VImg",{attrs:{radius:"50%",src:t.avatar||t.user.avatar,width:t.size,height:t.size,alt:t.user.nickname}})],1)}),[],!1,null,null,null);e.a=component.exports},382:function(t,e,n){"use strict";var o=n(360);n.n(o).a},396:function(t,e,n){t.exports={h1:"h1_17sSx",h2:"h2_29h8C",h3:"h3_pcROM",h4:"h4_-wXkD",h5:"h5_3RgCW",h6:"h6_1UKhu","skeleton-loading":"skeleton-loading_3wvbo",skeletonLoading:"skeleton-loading_3wvbo",skeleton:"skeleton_3yQuF"}},397:function(t,e,n){t.exports={image:"image_2HoYb",border:"border_fvHwL",bg:"bg_OU_Qk","skeleton-loading":"skeleton-loading_W_WF0",skeletonLoading:"skeleton-loading_W_WF0",skeleton:"skeleton_3dcSj"}},398:function(t,e,n){t.exports={paragraph:"paragraph_1OWG2","skeleton-loading":"skeleton-loading_3Hgsp",skeletonLoading:"skeleton-loading_3Hgsp",skeleton:"skeleton_2H5RA"}},399:function(t,e,n){t.exports={list:"list_rxwoA","skeleton-loading":"skeleton-loading_hADmg",skeletonLoading:"skeleton-loading_hADmg",skeleton:"skeleton_3a9b2"}},400:function(t,e,n){t.exports={delimiter:"delimiter_3ksS5","skeleton-loading":"skeleton-loading_1lzJ0",skeletonLoading:"skeleton-loading_1lzJ0",skeleton:"skeleton_jIhh3"}},401:function(t,e,n){t.exports={checklist:"checklist_35Trq","skeleton-loading":"skeleton-loading_2NnRn",skeletonLoading:"skeleton-loading_2NnRn",skeleton:"skeleton_RKAJg"}},402:function(t,e,n){t.exports={link:"link_1cdqF",content:"content_31mUQ",logo:"logo_3t3p1","skeleton-loading":"skeleton-loading_Q1SbS",skeletonLoading:"skeleton-loading_Q1SbS",skeleton:"skeleton_13H0b"}},403:function(t,e,n){t.exports={video:"video_1Ktgc",wrap:"wrap_3iFmj","skeleton-loading":"skeleton-loading_DCN-u",skeletonLoading:"skeleton-loading_DCN-u",skeleton:"skeleton_1YNsK"}},404:function(t,e,n){t.exports={music:"music_1aU_y","skeleton-loading":"skeleton-loading_3yST_",skeletonLoading:"skeleton-loading_3yST_",skeleton:"skeleton_3Zagh"}},405:function(t,e,n){t.exports={baidu:"baidu_3yD19",logo:"logo_3fZIb",content:"content_2vYlq","skeleton-loading":"skeleton-loading_2_Vpm",skeletonLoading:"skeleton-loading_2_Vpm",skeleton:"skeleton_Yoxzs"}},406:function(t,e,n){t.exports={vote:"vote_1AMl_",selected:"selected_1h5XP",count:"count_3bLzQ",active:"active_2YTSY","skeleton-loading":"skeleton-loading_2BuFl",skeletonLoading:"skeleton-loading_2BuFl",skeleton:"skeleton_3B0sO"}},465:function(t,e,n){"use strict";var o={name:"JsonHeader",props:{item:{type:Object,required:!0}},render:function(t){var e=this.item.data.level;return t("h"+this.item.data.level,{class:this.$style["h".concat(e)],domProps:{innerHTML:this.item.data.text}})}},l=n(498),r=n(7);var header=Object(r.a)(o,void 0,void 0,!1,(function(t){this.$style=l.default.locals||l.default}),null,null).exports,c={name:"JsonImage",props:{item:{type:Object,required:!0}}},d=n(499);var h=Object(r.a)(c,(function(){var t,e,n=this,o=n.$createElement,l=n._self._c||o;return l("div",{class:n.$style.image},[l("div",{class:[(t={},t[n.$style.border]=n.item.data.withBorder,t),(e={},e[n.$style.bg]=n.item.data.withBackground,e)]},[l("div",[l("VImg",{attrs:{src:n.item.data.file.url,stretched:n.item.data.stretched,width:n.item.data.file.width,height:n.item.data.file.height}})],1)]),n._v(" "),n.item.data.caption?l("p",{domProps:{textContent:n._s(n.item.data.caption)}}):n._e()])}),[],!1,(function(t){this.$style=d.default.locals||d.default}),null,null).exports,m={name:"JsonParagraph",props:{item:{type:Object,required:!0}}},f=n(500);var v=Object(r.a)(m,(function(){var t=this.$createElement;return(this._self._c||t)("p",{class:this.$style.paragraph,domProps:{innerHTML:this._s(this.item.data.text.replace(/\n/g,"<br>"))}})}),[],!1,(function(t){this.$style=f.default.locals||f.default}),null,null).exports,_={name:"JsonList",props:{item:{type:Object,required:!0}}},k=n(501);var y=Object(r.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.list},["ordered"===t.item.data.style?n("ol",t._l(t.item.data.items,(function(li,e){return n("li",{key:e,domProps:{innerHTML:t._s(li)}})})),0):n("ul",t._l(t.item.data.items,(function(li,e){return n("li",{key:e,domProps:{innerHTML:t._s(li)}})})),0)])}),[],!1,(function(t){this.$style=k.default.locals||k.default}),null,null).exports,x={name:"JsonDelimiter",props:{item:{type:Object,required:!0}}},$=n(502);var w=Object(r.a)(x,(function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.$style.delimiter})}),[],!1,(function(t){this.$style=$.default.locals||$.default}),null,null).exports,L={name:"JsonChecklist",props:{item:{type:Object,required:!0}}},C=n(503);var O=Object(r.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{class:t.$style.checklist},t._l(t.item.data.items,(function(option,e){return n("li",{key:e},[option.checked?n("i"):n("em"),t._v(" "),n("div",{domProps:{innerHTML:t._s(option.text)}})])})),0)}),[],!1,(function(t){this.$style=C.default.locals||C.default}),null,null).exports,j={name:"JsonLink",props:{item:{type:Object,required:!0}}},S=n(504);var H=Object(r.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.link},[n("a",{attrs:{target:"_blank",href:t.item.data.link}},[t.item.data.meta.image&&t.item.data.meta.image.url?n("img",{class:t.$style.logo,attrs:{src:t.item.data.meta.image.url,width:"65",height:"65"}}):t._e(),t._v(" "),n("div",{class:t.$style.content},[n("h3",{domProps:{textContent:t._s(t.item.data.meta.title)}}),t._v(" "),n("p",{domProps:{textContent:t._s(t.item.data.meta.description)}}),t._v(" "),n("span",{domProps:{textContent:t._s(t.item.data.link.replace(/https?:\/\//,""))}})])])])}),[],!1,(function(t){this.$style=S.default.locals||S.default}),null,null).exports,T={name:"JsonVideo",props:{item:{type:Object,required:!0}}},M=n(505);var video=Object(r.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.video},[n("div",{class:t.$style.wrap},[n("iframe",{attrs:{src:t.item.data.embed,scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowtransparency:"true",allowfullscreen:"true"}})]),t._v(" "),t.item.data.caption?n("p",{domProps:{textContent:t._s(t.item.data.caption)}}):t._e()])}),[],!1,(function(t){this.$style=M.default.locals||M.default}),null,null).exports,E={name:"JsonMusic",props:{item:{type:Object,required:!0}}},P=n(506);var D=Object(r.a)(E,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:this.$style.music},[e("iframe",{attrs:{src:this.item.data.embed,scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowtransparency:"true",allowfullscreen:"true",width:"330",height:"86"}}),this._v(" "),this.item.data.caption?e("p",{domProps:{textContent:this._s(this.item.data.caption)}}):this._e()])}),[],!1,(function(t){this.$style=P.default.locals||P.default}),null,null).exports,J={name:"JsonBaidu",props:{item:{type:Object,required:!0},reward:{type:Boolean,required:!0}}},A=n(507);var z=Object(r.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.baidu},[n("a",{attrs:{href:t.item.data.url,target:"_blank"}},[n("i",{staticClass:"iconfont ic-baidu-cloud",class:t.$style.logo}),t._v(" "),n("div",{class:t.$style.content},[0===t.item.data.visit_type||t.reward?[t._v(" 密码："+t._s(t.item.data.password)+" ")]:[t._v("\n        密码投食后可见\n      ")]],2)])])}),[],!1,(function(t){this.$style=A.default.locals||A.default}),null,null).exports,R=(n(91),n(53),n(177),n(9),n(476),n(363)),B={name:"JsonVote",props:{item:{type:Object,required:!0},vote:{type:Array,required:!0},slug:{type:String,required:!0}},data:function(){return{selected:[],submitting:!1,voted:!1,stat:[],maxCount:0}},watch:{vote:function(t){this.selected=t.map((function(t){return t})),t.length&&(this.voted=!0,this.getVoteStat())}},methods:{getVoteStat:function(){var t=this;this.$axios.$get("v1/pin/vote_stat",{params:{slug:this.slug}}).then((function(data){t.stat=data,t.maxCount=Math.max.apply(Math,Object(R.a)(Object.values(t.stat)))})).catch((function(){}))},handleSelect:function(option){var t=this.selected;if(!this.voted){var e=t.indexOf(option.id);if(~e)t.splice(e,1);else{var n=this.item.data.max_select;n<=t.length?1===n&&t.splice(e,1,option.id):t.push(option.id)}}},checkSelected:function(option){return~this.selected.indexOf(option.id)},submit:function(){var t=this;this.submitting||this.voted||(this.selected.length?this.item.data.expired_at&&1e3*this.item.data.expired_at<Date.now()?this.$toast.info("投票已截止"):(this.submitting=!0,this.$axios.$post("v1/social/vote",{pin_slug:this.slug,answer_hash:this.selected}).then((function(){t.$toast.success("投票成功"),t.voted=!0,t.getVoteStat()})).catch((function(e){t.$toast.error(e.message)})).finally((function(){t.submitting=!1}))):this.$toast.info("至少选择一项"))},computeItemStyle:function(option,t){var e=this.stat[option.id]||0;return{width:e?"".concat(75*e/this.maxCount,"%"):"0%",backgroundColor:this.getRandomColor(t)}},getRandomColor:function(t){return["rgba(255,170,170,.5)","rgba(255,148,39,.5)","rgba(252,196,25,.5)","rgba(32,201,151,.5)","rgba(18,183,245,.5)","rgba(173,181,189,.5)"][t%6]}}},V=n(508);var F=Object(r.a)(B,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{class:e.$style.vote},[o("div",[o("header",[e._v("投票（"+e._s(1===e.item.data.max_select?"单选":"最多选"+e.item.data.max_select+"个")+"）")]),e._v(" "),o("ul",e._l(e.item.data.items,(function(option,t){var n;return o("li",{key:option.id,staticClass:"oneline",class:(n={},n[e.$style.selected]=e.checkSelected(option),n),on:{click:function(t){return e.handleSelect(option)}}},[o("span",{class:e.$style.count,style:e.computeItemStyle(option,t),domProps:{innerHTML:e._s(e.stat[option.id]?e.stat[option.id]+"票&nbsp;&nbsp;":"")}}),e._v(" "),o("span",{domProps:{innerHTML:e._s(t+1+". "+option.text)}}),e._v(" "),o("i")])})),0),e._v(" "),o("footer",[o("span",[e._v("截止时间："+e._s(e.item.data.expired_at?e.$utils.timeAgo(e.item.data.expired_at):"无限期"))]),e._v(" "),o("button",{class:(t={},t[e.$style.active]=e.selected.length&&!e.voted,t),on:{click:e.submit}},[e._v("\n        "+e._s(e.submitting?"提交中":e.voted?"已投过票":"确认")+"\n      ")])])])])}),[],!1,(function(t){this.$style=V.default.locals||V.default}),null,null).exports,I=(n(30),n(174),n(31),n(37),n(71),n(359),n(387),n(32),n(88)),N=n(89),Q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.minLength,o=e.shareLink;Object(I.a)(this,t),this.config={org:"calibur",appendStr:"文章著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。",minLength:n||140,shareLink:o||window.location.href.split("?")[0]},this.prefix={org:"来源",link:"链接",author:"作者"}}return Object(N.a)(t,[{key:"bind",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.minLength,l=n.authorNickname,r=n.shareLink,c=n.appendStr;t.addEventListener("copy",(function(t){var n=o||e.config.minLength,d=r||e.config.shareLink,h=c||e.config.appendStr,m=window.getSelection().getRangeAt(0),f=e.getHTMLParser("");f&&f.appendChild(m.cloneContents());var v=m.toString().trim(),_=f?f.innerHTML:e.getRangeHtml(m);if(document.createElement("div").innerHTML=_,v.length>=n){var k=e.getCopyHtml(_,d,l,h),y=e.getCopyText(v,d,l,h);void 0===t.clipboardData&&e.hack(k,m);try{t.clipboardData.setData("text/plain",y),t.clipboardData.setData("text/html",k),t.preventDefault()}catch(t){e.hack(k,m)}}}))}},{key:"abort",value:function(t){t.addEventListener("copy",(function(t){return t.stopPropagation(),t.preventDefault(),t.cancelBubble=!1,!1}))}},{key:"hack",value:function(text,t){var e=document.createElement("div");e.innerHTML=text,e.style.position="fixed",e.style.left="-9999px",document.body.appendChild(e),window.getSelection().selectAllChildren(e),setTimeout((function(){try{window.getSelection().removeAllRanges(),window.getSelection().addRange(t)}catch(t){}document.body.removeChild(e)}),0)}},{key:"getCopyHtml",value:function(html,t,e,n){var o=this.getExtraCopyright(t,e,n).join("<br>");return"<div><div>".concat(html,"</div>").concat(o,"</div>")}},{key:"getCopyText",value:function(text,t,e,n){return text+this.getExtraCopyright(t,e,n).join("\n")}},{key:"getExtraCopyright",value:function(t,e,n){return e?["","","".concat(this.prefix.author,"：").concat(e),"".concat(this.prefix.link,"：").concat(t),"".concat(this.prefix.org,"：").concat(this.config.org),n]:["","","".concat(this.prefix.link,"：").concat(t),"".concat(this.prefix.org,"：").concat(this.config.org),n]}},{key:"getRangeHtml",value:function(text){var div=document.createElement("div");return div.appendChild(text.cloneContents()),div.outerHTML}},{key:"getHTMLParser",value:function(t){try{return(new window.DOMParser).parseFromString(t,"text/html").body}catch(n){var e=document.implementation.createHTMLDocument("");return e.body.innerHTML=t,e.body}}}]),t}(),W={name:"JsonContent",components:{"v-header":header,"v-image":h,"v-paragraph":v,"v-list":y,"v-delimiter":w,"v-checklist":O,"v-link":H,"v-video":video,"v-music":D,"v-baidu":z,"v-vote":F},props:{content:{required:!0,type:Array},reward:{type:Boolean,default:!1},vote:{type:Array,default:function(){return[]}},slug:{type:String,default:""}},mounted:function(){(new Q).bind(this.$el)}},Y=Object(r.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"json-content"},t._l(t.content,(function(e,o){return n("v-"+e.type,{key:o,tag:"component",attrs:{item:e,reward:t.reward,vote:t.vote,slug:t.slug}})})),1)}),[],!1,null,null,null);e.a=Y.exports},477:function(t,e,n){t.exports=n.p+"img/e82d3e7.png"},498:function(t,e,n){"use strict";var o=n(396),l=n.n(o);e.default=l.a},499:function(t,e,n){"use strict";var o=n(397),l=n.n(o);e.default=l.a},500:function(t,e,n){"use strict";var o=n(398),l=n.n(o);e.default=l.a},501:function(t,e,n){"use strict";var o=n(399),l=n.n(o);e.default=l.a},502:function(t,e,n){"use strict";var o=n(400),l=n.n(o);e.default=l.a},503:function(t,e,n){"use strict";var o=n(401),l=n.n(o);e.default=l.a},504:function(t,e,n){"use strict";var o=n(402),l=n.n(o);e.default=l.a},505:function(t,e,n){"use strict";var o=n(403),l=n.n(o);e.default=l.a},506:function(t,e,n){"use strict";var o=n(404),l=n.n(o);e.default=l.a},507:function(t,e,n){"use strict";var o=n(405),l=n.n(o);e.default=l.a},508:function(t,e,n){"use strict";var o=n(406),l=n.n(o);e.default=l.a}}]);