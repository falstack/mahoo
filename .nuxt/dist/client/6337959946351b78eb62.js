(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{365:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(128);var o=n(179);function c(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},380:function(t,e,n){"use strict";var r=n(3),o=n(381);r({target:"String",proto:!0,forced:n(382)("link")},{link:function(t){return o(this,"a","href",t)}})},381:function(t,e,n){var r=n(24),o=/"/g;t.exports=function(t,e,n,c){var l=String(r(t)),d="<"+e;return""!==n&&(d+=" "+n+'="'+String(c).replace(o,"&quot;")+'"'),d+">"+l+"</"+e+">"}},382:function(t,e,n){var r=n(4);t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},385:function(t,e,n){},386:function(t,e,n){},442:function(t,e,n){"use strict";var r=n(385);n.n(r).a},443:function(t,e,n){"use strict";var r=n(386);n.n(r).a},461:function(t,e,n){"use strict";e.a=[{type:"douga",main:!0,left:{slug:1,name:"动画",type:"MainFlowTab"},right:{slug:1,name:"特别推荐",type:"RecommendedSwipe"}},{type:"bangumi",main:!0,left:{slug:5,name:"番剧",type:"BangumiSwitcher"},right:{slug:5,type:"RankSwitcher"}},{type:"bangumi-about",main:!1,left:{slug:8,name:"番剧动态",type:"MainFlowTab"},right:{slug:8,type:"RankDaily"}},{type:"manga",main:!0,left:{slug:4,name:"漫画",type:"MainFlowTab"},right:{slug:4,type:"RankSwitcher"}},{type:"game",main:!0,left:{slug:2,name:"游戏",type:"MainFlowTab"},right:{slug:2,type:"RankSwitcher"}},{type:"novel",main:!0,left:{slug:6,name:"帖子",type:"MainFlowTab"},right:{slug:6,type:"RankDaily"}},{type:"music",main:!0,left:{slug:7,name:"音乐",type:"MainFlowTab"},right:{slug:7,type:"RankSwitcher"}},{type:"life",main:!0,left:{slug:3,name:"生活",type:"MainFlowTab"},right:{slug:3,type:"RankSwitcher"}}]},473:function(t,e,n){},474:function(t,e,n){},475:function(t,e,n){},476:function(t,e,n){},477:function(t,e,n){},478:function(t,e,n){},479:function(t,e,n){},480:function(t,e,n){},481:function(t,e,n){},482:function(t,e,n){},483:function(t,e,n){},484:function(t,e,n){},485:function(t,e,n){},486:function(t,e,n){},487:function(t,e,n){},488:function(t,e,n){},490:function(t,e,n){"use strict";var r={name:"HeaderPopover",components:{},props:{className:{type:String,default:""}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},o=(n(442),n(7)),c=Object(o.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header-popover"},[e("div",{staticClass:"trigger"},[this._t("trigger")],2),this._v(" "),e("div",{staticClass:"content",class:this.className},[this._t("content")],2)])}),[],!1,null,null,null).exports,l=n(17),d={name:"PageHeader",components:{HeaderPopover:c},props:{background:{type:String,default:""}},data:function(){return{}},computed:{hasBg:function(){return!!this.background},isAuth:function(){return this.$store.state.isAuth},user:function(){return this.$store.state.user}},watch:{},created:function(){},mounted:function(){},methods:{handleSignIn:function(){this.$channel.$emit("sign-in")},handleLogout:function(){Object(l.f)(this),this.$cookie.remove("JWT-TOKEN"),this.$channel.socketDisconnect(),window.location="/"}}},f=(n(443),Object(o.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{class:{"with-bg":t.hasBg},attrs:{id:"page-header"}},[t.hasBg?n("div",{staticClass:"mask-wrap"},[n("div",{staticClass:"mask-bg",style:{backgroundImage:"url("+t.background+")"}})]):t._e(),t._v(" "),n("div",{staticClass:"mask-shim"}),t._v(" "),n("div",{staticClass:"text-wrap v-layout"},[n("ul",{staticClass:"header-left"},[n("li",[n("NLink",{staticClass:"nav-link home-link",attrs:{to:"/"}},[n("i",{staticClass:"iconfont ic-calibur"}),t._v(" "),n("span",[t._v("主站")])])],1),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("游戏中心")])])],1),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("直播")])])],1),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("会员购")])])],1),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("漫画")])])],1),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("赛事")])])],1),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("i",{staticClass:"iconfont ic-phone"}),t._v(" "),n("span",[t._v("下载APP")])])],1)]),t._v(" "),n("ul",{staticClass:"header-right"},[t.isAuth?[n("li",{staticClass:"user-panel"},[n("HeaderPopover",{attrs:{"class-name":"user-popover"},scopedSlots:t._u([{key:"trigger",fn:function(){return[n("NLink",{staticClass:"avatar",attrs:{to:t.$alias.user(t.user.slug)}},[n("img",{attrs:{src:t.$resizeImage(t.user.avatar,{width:60}),alt:""}})])]},proxy:!0},{key:"content",fn:function(){return[n("p",{staticClass:"nickname oneline",domProps:{innerHTML:t._s(t.user.nickname)}}),t._v(" "),n("NLink",{attrs:{to:t.$alias.user(t.user.slug,"setting")}},[n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[n("i",{staticClass:"iconfont ic-setup_fill"}),t._v(" "),n("span",[t._v("设置")])])])]),t._v(" "),n("button",{staticClass:"sign-out",on:{click:t.handleLogout}},[t._v("\n                退出\n              ")])]},proxy:!0}],null,!1,1277139557)})],1),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("大会员")])])],1),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("消息")])])],1),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("动态")])])],1),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("稍后在看")])])],1),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("收藏")])])],1)]:[n("li",[n("button",{staticClass:"nav-link",on:{click:t.handleSignIn}},[t._v("\n            登录\n          ")])]),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("动态")])])],1)],t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("历史")])])],1),t._v(" "),n("li",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("创作中心")])])],1),t._v(" "),n("li",[n("Button",{staticClass:"create-btn"},[t._v("\n          投稿\n        ")])],1)],2)])])}),[],!1,null,null,null));e.a=f.exports},577:function(t,e,n){"use strict";var r=n(473);n.n(r).a},578:function(t,e,n){"use strict";var r=n(474);n.n(r).a},579:function(t,e,n){"use strict";var r=n(3),o=n(56).findIndex,c=n(182),l=n(27),d=!0,f=l("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){d=!1})),r({target:"Array",proto:!0,forced:d||!f},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),c("findIndex")},580:function(t,e,n){"use strict";var r=n(475);n.n(r).a},581:function(t,e,n){"use strict";var r=n(476);n.n(r).a},582:function(t,e,n){"use strict";var r=n(477);n.n(r).a},583:function(t,e,n){"use strict";var r=n(478);n.n(r).a},584:function(t,e,n){"use strict";var r=n(479);n.n(r).a},585:function(t,e,n){"use strict";var r=n(480);n.n(r).a},586:function(t,e,n){"use strict";var r=n(481);n.n(r).a},587:function(t,e,n){"use strict";var r=n(482);n.n(r).a},588:function(t,e,n){"use strict";var r=n(483);n.n(r).a},589:function(t,e,n){"use strict";var r=n(484);n.n(r).a},590:function(t,e,n){"use strict";var r=n(485);n.n(r).a},591:function(t,e,n){"use strict";var r=n(486);n.n(r).a},592:function(t,e,n){"use strict";var r=n(487);n.n(r).a},593:function(t,e,n){"use strict";var r=n(488);n.n(r).a},604:function(t,e,n){"use strict";n.r(e);n(9),n(44),n(45);var r=n(490),o={name:"PageBanner",props:{background:{required:!0,type:String}},data:function(){return{keyword:""}},methods:{handleSearch:function(){this.keyword&&window.open("https://search.bilibili.com/all?keyword=".concat(encodeURIComponent(this.keyword),"&from_source=calibur"))}}},c=(n(577),n(7)),l=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{style:{backgroundImage:"url("+t.background+")"},attrs:{id:"page-banner"}},[n("div",{staticClass:"v-layout"},[n("img",{staticClass:"logo",attrs:{src:t.$resizeImage("logo-border.png",{width:220,rule:2}),alt:"logo"}}),t._v(" "),n("div",{staticClass:"search-box"},[t._m(0),t._v(" "),n("form",{staticClass:"search-wrap",attrs:{action:"#",method:"get"},on:{submit:function(e){return e.preventDefault(),t.handleSearch(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{placeholder:"搜索 bilibili",type:"text",name:"keyword","aria-autocomplete":"both","aria-haspopup":"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off",role:"combobox",spellcheck:"false",maxlength:"50"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t._v(" "),n("button",{staticClass:"submit-btn",attrs:{type:"submit"}})])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"rank",attrs:{href:"https://www.bilibili.com/ranking"}},[e("span",[this._v("排行榜")])])}],!1,null,null,null).exports,d={name:"PageFooter",components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},f=(n(578),Object(c.a)(d,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{attrs:{id:"page-footer"}},[n("div",{staticClass:"v-layout"},[n("div",{staticClass:"links-wrap"},[n("div",{staticClass:"links-item"},[n("p",[t._v("calibur")]),t._v(" "),n("ul",[n("a",{staticClass:"fade-link",attrs:{href:"javascript:;"}},[t._v("关于我们")]),t._v(" "),n("a",{staticClass:"fade-link",attrs:{href:"javascript:;"}},[t._v("联系我们")]),t._v(" "),n("a",{staticClass:"fade-link",attrs:{href:"javascript:;"}},[t._v("用户协议")]),t._v(" "),n("a",{staticClass:"fade-link",attrs:{href:"javascript:;"}},[t._v("加入我们")]),t._v(" "),n("a",{staticClass:"fade-link",attrs:{href:"javascript:;"}},[t._v("友情链接")]),t._v(" "),n("a",{staticClass:"fade-link",attrs:{href:"javascript:;"}},[t._v("隐私政策")])])]),t._v(" "),n("div",{staticClass:"links-item"},[n("p",[t._v("传送门")]),t._v(" "),n("ul",[n("a",{staticClass:"fade-link",attrs:{href:"javascript:;"}},[t._v("Excalibur")]),t._v(" "),n("a",{staticClass:"fade-link",attrs:{href:"javascript:;"}},[t._v("Dollars")]),t._v(" "),n("a",{staticClass:"fade-link",attrs:{href:"javascript:;"}},[t._v("Sword Art Online")]),t._v(" "),n("a",{staticClass:"fade-link",attrs:{href:"javascript:;"}},[t._v("SOS Dan")]),t._v(" "),n("a",{staticClass:"fade-link",attrs:{href:"javascript:;"}},[t._v("Death Note")])])]),t._v(" "),n("ul",{staticClass:"icons-wrap"},[n("li",{staticClass:"icons-item"},[n("i",{staticClass:"iconfont ic-qq"}),t._v(" "),n("p",{staticClass:"name"},[t._v("\n            QQ\n          ")]),t._v(" "),n("div",{staticClass:"qr"},[n("img",{attrs:{src:"https://m1.calibur.tv/qq_mini_app.png",alt:""}})])]),t._v(" "),n("li",{staticClass:"icons-item"},[n("i",{staticClass:"iconfont ic-v-chat"}),t._v(" "),n("p",{staticClass:"name"},[t._v("\n            微信\n          ")]),t._v(" "),n("div",{staticClass:"qr"},[n("img",{attrs:{src:"https://m1.calibur.tv/weixin_mini_app.jpg",alt:""}})])])])])]),t._v(" "),n("div",{staticClass:"v-layout"},[n("div",{staticClass:"text-con"},[n("p",[n("span",[t._v("互联网ICP备案："),n("a",{staticClass:"fade-link",attrs:{href:"http://beian.miit.gov.cn/",target:"_blank"}},[t._v("沪ICP备17050785号-1")])])]),t._v(" "),n("p",[t._v("违法不良信息举报邮箱："),n("a",{staticClass:"fade-link",attrs:{href:"mailto:im_bai@163.com"}},[t._v("im_bai@163.com")])]),t._v(" "),n("p",[n("a",{staticClass:"fade-link",attrs:{href:"http://www.shjbzx.cn",target:"_blank"}},[t._v("上海互联网举报中心")]),t._v(" |\n        "),n("a",{staticClass:"fade-link",attrs:{href:"http://jbts.mct.gov.cn/",target:"_blank"}},[t._v("12318全国文化市场举报网站")]),t._v(" |\n        "),n("a",{staticClass:"fade-link",attrs:{href:"mailto:userreport@bilibili.com"}},[t._v("儿童色情信息举报专区")])]),t._v(" "),n("p",[t._v("网上有害信息举报专区："),n("a",{staticClass:"fade-link",attrs:{href:"https://www.12377.cn/",target:"_blank"}},[t._v("中国互联网违法和不良信息举报中心")])]),t._v(" "),n("p",[t._v("公司名称：上海十六夜网络科技有限公司 | 公司地址：浦东新区 万祥镇宏祥北路83弄1-42号")])])])])}],!1,null,null,null).exports),v=(n(31),n(579),n(13),n(42),n(37),n(14),function(t){return t.$axios.$get("v1/cm/index_menu_list")}),m={name:"MenuBar",filters:{convertCount:function(t){return t?t>999?"999+":t:"- -"}},props:{menu:{type:Array,default:function(){return[]}}},data:function(){return{list:this.menu}},mounted:function(){this.getCounter()},methods:{getCounter:function(){var t,e=this;(t=this,t.$axios.$get("v1/cm/index_menu_stat")).then((function(t){Object.keys(t).forEach((function(n){var r=e.list.findIndex((function(t){return t.id.toString()===n.toString()}));e.list[r].count=+t[n]}))})).catch((function(){}))},convertPing:function(t){return"".concat("https://api.calibur.tv/","v1/cm/report_menu_click?id=").concat(t.id,"&type=").concat(t.type)}}},h=(n(580),Object(c.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"clearfix",attrs:{id:"menu-bar"}},[n("li",{staticClass:"menu-item"},[n("NuxtLink",{staticClass:"home-link menu-link",attrs:{to:"/"}},[n("div",{staticClass:"icon"}),t._v(" "),n("span",[t._v("首页")])])],1),t._v(" "),t._l(t.list,(function(e){return n("li",{key:e.id,staticClass:"menu-item"},[n("NuxtLink",{staticClass:"menu-link",attrs:{to:"/"}},[n("div",{staticClass:"count-wrap"},[n("span",{staticClass:"count"},[t._v(t._s(t._f("convertCount")(e.count)))])]),t._v(" "),n("span",{domProps:{textContent:t._s(e.name)}})]),t._v(" "),n("ul",{staticClass:"sub-menu"},t._l(e.children,(function(sub){return n("li",{key:sub.id,staticClass:"sub-item"},[n("a",{attrs:{target:"_blank",href:sub.href,ping:t.convertPing(sub)}},[n("span",{domProps:{textContent:t._s(sub.name)}})])])})),0)],1)}))],2)}),[],!1,null,null,null).exports),_=(n(72),n(92),n(380),{name:"VCarousel",props:{list:{type:Array,default:function(){return[]}}},data:function(){return{activeIndex:0,reports:[0]}},computed:{showTitle:function(){var t=this.list[this.activeIndex];return t?t.title:""},showUrl:function(){var t=this.list[this.activeIndex];return t?this.convertUrl(t.link):""}},methods:{handleChange:function(t){this.activeIndex=t,this.reports.includes(t)||(this.reports.push(t),this.$axios.$post("v1/cm/report_banner",{type:"visit",id:this.list[t].id}))},convertUrl:function(t){return t},convertPing:function(t){return"".concat("https://api.calibur.tv/","v1/cm/report_banner?type=click&id=").concat(t)}}}),k=(n(581),Object(c.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"v-carousel"}},[n("VSwitcher",{attrs:{"default-index":t.activeIndex,headers:t.list,swipe:!0,autoplay:5e3,align:"end"},on:{change:t.handleChange}},[t._l(t.list,(function(e,r){return n("a",{key:r,staticClass:"carousel-item",attrs:{slot:r,href:t.convertUrl(e.link),ping:t.convertPing(e.id),target:"_blank"},slot:r},[n("VImg",{attrs:{src:t.$resizeImage(e.image,{width:440,height:220})}})],1)})),t._v(" "),n("a",{staticClass:"title",attrs:{slot:"header-before",target:"_blank",href:t.showUrl},domProps:{textContent:t._s(t.showTitle)},slot:"header-before"}),t._v(" "),n("a",{staticClass:"more",attrs:{slot:"header-after",href:"javascript:;"},slot:"header-after"},[t._v("更多")])],2)],1)}),[],!1,null,null,null).exports),C={name:"AboutSite",components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},y=(n(582),Object(c.a)(C,(function(){var t=this.$createElement;return(this._self._c||t)("a",{attrs:{id:"about-site",href:"/"}},[this._v("\n  关于网站\n")])}),[],!1,null,null,null).exports),w=(n(91),n(54),n(365));function x(t,e,n,r){var o,c=!1,l=0;function d(){o&&clearTimeout(o)}function f(){var f=this,v=Date.now()-l,m=arguments;function h(){l=Date.now(),n.apply(f,m)}function _(){o=void 0}c||(r&&!o&&h(),d(),void 0===r&&v>t?h():!0!==e&&(o=setTimeout(r?_:h,void 0===r?t-v:t)))}return"boolean"!=typeof e&&(r=n,n=e,e=void 0),f.cancel=function(){d(),c=!0},f}var S={name:"VerticalNavBar",components:{},props:{menu:{required:!0,type:Array}},data:function(){return{atTop:!0,offsetTop:0,offsets:[],active:-1}},computed:{top:function(){return this.atTop?"232px":this.offsetTop}},watch:{},created:function(){},mounted:function(){this.calcOffset(),window.addEventListener("scroll",this.onScroll)},methods:{onScroll:x(100,(function(){var t=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop);if(this.atTop=t<=220,t<=0)this.active=-1;else{var e=this.offsets.map((function(e){return Math.abs(e-t)}));this.active=e.indexOf(Math.min.apply(Math,Object(w.a)(e)))}})),calcOffset:function(){var t=this;this.offsets=[];var e=document.querySelectorAll(".anchor-module"),n=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop);[].forEach.call(e,(function(e){var rect=e.getBoundingClientRect();t.offsets.push(n+rect.top)}));var r=this.$el.getBoundingClientRect().height,o=document.documentElement.clientHeight;this.offsetTop=r>=o?"0px":"".concat((o-r)/2|0,"px");var c=this.offsets.map((function(t){return Math.abs(t-n)}));this.active=c.indexOf(Math.min.apply(Math,Object(w.a)(c)))}}},$=(n(583),Object(c.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{top:t.top},attrs:{id:"vertical-nav-bar"}},[n("ul",{staticClass:"nav-list"},t._l(t.menu,(function(e,r){return n("li",{key:e.type},[n("a",{class:{"is-active":r===t.active},attrs:{href:"#"+e.type},domProps:{textContent:t._s(e.left.name)}})])})),0),t._v(" "),t._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"back-top",attrs:{href:"#"}},[e("span")])}],!1,null,null,null).exports),I=(n(174),{name:"HomepageFlow",components:{},props:{func:{required:!0,type:String},type:{type:String,default:"page"},auto:{type:Number,default:1},query:{type:Object,default:function(){}}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{handleCallback:function(t){var e=t.data.result;e.length&&this.$emit("callback",e)}}}),j=(n(584),Object(c.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FlowLoader",{staticClass:"homepage-flow",attrs:{func:t.func,type:t.type,query:Object.assign({},{$axios:t.$axios},t.query),auto:t.auto,callback:t.handleCallback},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.flow;return[t._t("default",null,{flow:n})]}}],null,!0)},[t._v(" "),n("template",{slot:"loading"},[n("i"),t._v(" "),n("span",[t._v("正在加载...")])]),t._v(" "),n("template",{slot:"error"},[n("i"),t._v(" "),n("span",[t._v("加载失败，"),n("em",[t._v("点击重试")])])]),t._v(" "),n("template",{slot:"nothing"},[n("i")])],2)}),[],!1,null,null,null).exports),P={name:"RecommendRectItem",components:{},props:{item:{type:Object,required:!0}},data:function(){return{}},computed:{href:function(){return"https://www.bilibili.com/av".concat(this.item.model_id)},ping:function(){return"".concat("https://api.calibur.tv/","v1/flow/spider_report?type=click&id=").concat(this.item.id)}},watch:{},created:function(){},mounted:function(){},methods:{}},R=(n(585),{name:"RollRecommended",components:{HomepageFlow:j,RecommendRectItem:Object(c.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"rec-rect-item"},[n("a",{attrs:{href:t.href,ping:t.ping,target:"_blank"}},[n("img",{staticClass:"poster",attrs:{src:t.$resizeImage(t.item.data.poster,{width:160,height:100})}}),t._v(" "),n("span",{staticClass:"mask"},[n("p",{staticClass:"title",domProps:{textContent:t._s(t.item.data.title)}}),t._v(" "),n("p",{staticClass:"author"},[t._v("UP主："+t._s(t.item.data.username))]),t._v(" "),n("p",{staticClass:"play"},[t._v("播放："+t._s(t.$utils.formatNumber(t.item.data.visit_count)))])])])])}),[],!1,null,null,null).exports},props:{},data:function(){return{activeIndex:0}},computed:{leftText:function(){var t=this.activeIndex;return 0===t?"昨日":1===t?"三日":"一周"},rightText:function(){var t=this.activeIndex;return 0===t?"一周":1===t?"昨日":"三日"}},watch:{},created:function(){},mounted:function(){},methods:{handleChangeRecommended:function(t){this.activeIndex=t},getRandomColor:function(){var t=["rgba(21,174,103,.5)","rgba(245,163,59,.5)","rgba(255,230,135,.5)","rgba(194,217,78,.5)","rgba(195,123,177,.5)","rgba(125,205,244,.5)"];return t[~~(Math.random()*t.length)]},switchRecommended:function(t){t?this.$refs.switcher.next():this.$refs.switcher.prev()},handleLoaded:function(){console.log("handleLoaded")}}}),O=(n(586),Object(c.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"roll-recommended"}},[n("VSwitcher",{ref:"switcher",attrs:{headers:["","",""]},on:{change:t.handleChangeRecommended}},[n("HomepageFlow",{attrs:{slot:"0",func:"getHotFlowData",query:{day:1}},on:{callback:t.handleLoaded},slot:"0",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return n("ul",{},t._l(r,(function(t){return n("RecommendRectItem",{key:t.id,attrs:{item:t}})})),1)}}])}),t._v(" "),n("HomepageFlow",{attrs:{slot:"1",func:"getHotFlowData",query:{day:3}},on:{callback:t.handleLoaded},slot:"1",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return n("ul",{},t._l(r,(function(t){return n("RecommendRectItem",{key:t.id,attrs:{item:t}})})),1)}}])}),t._v(" "),n("HomepageFlow",{attrs:{slot:"2",func:"getHotFlowData",query:{day:7}},on:{callback:t.handleLoaded},slot:"2",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return n("ul",{},t._l(r,(function(t){return n("RecommendRectItem",{key:t.id,attrs:{item:t}})})),1)}}])})],1),t._v(" "),n("div",{staticClass:"indicator"},[n("button",{staticClass:"btn-prev",on:{click:function(e){return t.switchRecommended(!1)}}},[t._v("\n      "+t._s(t.leftText)+"\n    ")]),t._v(" "),n("button",{staticClass:"btn-next",on:{click:function(e){return t.switchRecommended(!0)}}},[t._v("\n      "+t._s(t.rightText)+"\n    ")])])],1)}),[],!1,null,null,null).exports),L={name:"BangumiIntroItem",props:{item:{type:Object,required:!0}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},T=(n(587),{name:"BangumiSwitcher",components:{BangumiIntroItem:Object(c.a)(L,(function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"bgm-intro-item"},[e("a",{staticClass:"poster",attrs:{href:"javascript:;"}},[e("img",{attrs:{src:this.$resizeImage(this.item.avatar,{width:72})}})]),this._v(" "),e("p",{staticClass:"intro"},[e("a",{staticClass:"title fade-link",attrs:{href:"javascript:;"},domProps:{textContent:this._s(this.item.name)}}),this._v(" "),e("span",{staticClass:"oneline"},[this._v("暂无")])])])}),[],!1,null,null,null).exports},computed:{defaultIndex:function(){return((new Date).getDay()||7)-1},resource:function(){return this.$store.getters["flow/getFlow"]({func:"getBangumiRelease",type:"page"})},list:function(){return this.resource?this.resource.result:[[],[],[],[],[],[],[]]},headers:function(){return[{text:"一","text-active":"周一"},{text:"二","text-active":"周二"},{text:"三","text-active":"周三"},{text:"四","text-active":"周四"},{text:"五","text-active":"周五"},{text:"六","text-active":"周六"},{text:"日","text-active":"周日"}]}},methods:{handleLazy:function(){this.$refs.loader.initData()},handleTabSwitch:function(){this.resource&&this.resource.error&&this.$refs.loader.initData()},handleRetry:function(){this.$refs.loader.retry()}}}),N=(n(588),Object(c.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"lazyload",rawName:"v-lazyload",value:t.handleLazy,expression:"handleLazy"}],attrs:{id:"bangumi-switcher"}},[n("VSwitcher",{attrs:{"default-index":t.defaultIndex,headers:t.headers,"header-height":36,align:"around"},on:{change:t.handleTabSwitch}},[n("div",{staticClass:"header-before",attrs:{slot:"header-before"},slot:"header-before"},[n("i"),t._v(" "),n("a",{attrs:{href:"javascript:;"}},[t._v("番剧")])]),t._v(" "),n("a",{staticClass:"header-after",attrs:{slot:"header-after",href:"javascript:;"},slot:"header-after"},[n("span",[t._v("新番时间表")]),t._v(" "),n("i")]),t._v(" "),t._l(t.headers,(function(e,r){return n("template",{slot:r},[t.list[r]&&t.list[r].length?n("ul",{key:r,staticClass:"flow-content"},t._l(t.list[r],(function(t){return n("BangumiIntroItem",{key:t.id,attrs:{item:t}})})),1):n("div",{key:r,staticClass:"state-content"},[!t.resource||t.resource.loading?[n("i",{staticClass:"loading-img"}),t._v(" "),n("span",{staticClass:"loading-txt"},[t._v("正在加载...")])]:t.resource.error?[n("i",{staticClass:"error-img"}),t._v(" "),n("span",{on:{click:t.handleRetry}},[t._v("加载失败，"),n("em",[t._v("点击重试")])])]:[n("i",{staticClass:"nothing-img"})]],2)])}))],2),t._v(" "),n("FlowLoader",{ref:"loader",attrs:{func:"getBangumiRelease",type:"page",query:{$axios:t.$axios},auto:0}})],1)}),[],!1,null,null,null).exports),E={name:"RankSwitcher",components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},M=(n(589),Object(c.a)(E,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rank-switcher"},[e("VSwitcher",{attrs:{"header-height":23,headers:["全网","站内"],align:"start",animated:!0,"header-trigger":"hover"}},[e("div",{staticClass:"header-before",attrs:{slot:"header-before"},slot:"header-before"},[this._v("\n      热门\n    ")]),this._v(" "),e("div",{staticClass:"header-after",attrs:{slot:"header-after"},slot:"header-after"},[this._v("\n      三日\n    ")]),this._v(" "),e("div",{staticClass:"k-item",staticStyle:{"background-color":"rgba(21,174,103,.5)"},attrs:{slot:"0"},slot:"0"},[this._v("\n      0\n    ")]),this._v(" "),e("div",{staticClass:"k-item",staticStyle:{"background-color":"rgba(125,205,244,.5)"},attrs:{slot:"1"},slot:"1"},[this._v("\n      1\n    ")])])],1)}),[],!1,null,null,null).exports),F=(n(173),{name:"BiliVideoItem",props:{item:{type:Object,required:!0}},computed:{href:function(){return"https://www.bilibili.com/av".concat(this.item.model_id)},ping:function(){return"".concat("https://api.calibur.tv/","v1/flow/spider_report?type=click&id=").concat(this.item.id)}}}),B=(n(590),Object(c.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"bili-video-item"},[n("a",{staticClass:"poster",attrs:{href:t.href,ping:t.ping,target:"_blank"}},[n("img",{staticClass:"cover",attrs:{src:t.$resizeImage(t.item.data.poster,{width:160,height:100})}}),t._v(" "),n("div",{staticClass:"mask"},[n("p",{staticClass:"duration",domProps:{textContent:t._s(t.$utils.formatDuration(t.item.data.duration))}})])]),t._v(" "),n("div",{staticClass:"text"},[n("a",{staticClass:"title fade-link",attrs:{target:"_blank",href:t.href},domProps:{innerHTML:t._s(t.item.data.title)}}),t._v(" "),n("div",{staticClass:"mask"},[n("div",[n("i",{staticClass:"view-count"}),t._v(" "),n("span",{domProps:{textContent:t._s(t.$utils.formatNumber(t.item.data.visit_count))}})]),t._v(" "),n("div",[n("i",{staticClass:"danmu-count"}),t._v(" "),n("span",{domProps:{textContent:t._s(t.$utils.formatNumber(t.item.data.danmu_count))}})])])])])}),[],!1,null,null,null).exports),H={name:"MainFlowTab",components:{HomepageFlow:j,BilbiliVideoItem:B},props:{type:{required:!0,type:String},name:{required:!0,type:String},slug:{required:!0,type:Number}},data:function(){return{randId:[0,1,2,3,4,5,6,7,8,9][9*Math.random()|0]}},computed:{headers:function(){return["有新动态","最新投稿"]},backgroundPosition:function(){var t="";switch(this.type){case"douga":t="-141px -908px";break;case"bangumi":t="-141px -140px";break;case"game":t="-141px -203px";break;case"manga":t="-139px -1931px";break;case"music":t="-140px -266px";break;case"dance":t="-141px -461px";break;case"novel":t="-138px -1803px"}return t}},methods:{handleLoaded:function(data){this.$axios.$post("v1/flow/spider_report",{type:"visit",id:data.map((function(t){return t.id})).join(",")})}}},D=(n(591),Object(c.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-flow-tab"},[n("VSwitcher",{attrs:{headers:t.headers,"header-height":55}},[n("template",{slot:"header-before"},[t.backgroundPosition?[n("i",{style:{backgroundPosition:t.backgroundPosition}}),t._v(" "),n("span",{domProps:{textContent:t._s(t.name)}})]:n("p",{domProps:{textContent:t._s(t.name)}})],2),t._v(" "),n("template",{slot:"header-after"},[n("a",{staticClass:"more",attrs:{href:"javascript:;"}},[n("span",[t._v("更多")]),t._v(" "),n("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),n("HomepageFlow",{attrs:{slot:"0",func:"getMixinFlowData",query:{slug:t.slug,sort:"activity",take:10,rand_id:t.randId}},on:{callback:t.handleLoaded},slot:"0",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return t._l(r,(function(t){return n("BilbiliVideoItem",{key:t.id,attrs:{item:t}})}))}}])}),t._v(" "),n("HomepageFlow",{attrs:{slot:"1",func:"getMixinFlowData",query:{slug:t.slug,sort:"newest",take:10,rand_id:t.randId}},on:{callback:t.handleLoaded},slot:"1",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return t._l(r,(function(t){return n("BilbiliVideoItem",{key:t.id,attrs:{item:t}})}))}}])})],2)],1)}),[],!1,null,null,null).exports),A={name:"RecommendedSwipe",components:{},props:{name:{type:String,default:""}},data:function(){return{activeIndex:0}},computed:{list:function(){return[{title:"测试1"},{title:"测试2"}]}},watch:{},created:function(){},mounted:function(){},methods:{handleChange:function(t){this.activeIndex=t}}},V=(n(592),Object(c.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recommended-swipe"},[n("p",{staticClass:"name",domProps:{textContent:t._s(t.name)}}),t._v(" "),n("VSwitcher",{attrs:{headers:t.list,"header-height":35,autoplay:2e3,animated:!0,"header-trigger":"hover"},on:{change:t.handleChange}},[n("div",{staticClass:"k-item",staticStyle:{"background-color":"rgba(21,174,103,.5)"},attrs:{slot:"0"},slot:"0"},[t._v("\n      0\n    ")]),t._v(" "),n("div",{staticClass:"k-item",staticStyle:{"background-color":"rgba(125,205,244,.5)"},attrs:{slot:"1"},slot:"1"},[t._v("\n      1\n    ")]),t._v(" "),n("template",{slot:"header-before"},[t._v("\n      "+t._s(t.list[t.activeIndex].title)+"\n    ")])],2)],1)}),[],!1,null,null,null).exports),z=n(461),U={name:"Homepage",components:{PageHeader:r.a,PageBanner:l,PageFooter:f,MenuBar:h,Carousel:k,AboutSite:y,VerticalNavBar:$,RollRecommended:O,BangumiSwitcher:N,RankSwitcher:M,MainFlowTab:D,RecommendedSwipe:V},props:{},asyncData:function(t){var e,n=t.app,r=t.error;return Promise.all([(e=n,e.$axios.$get("v1/cm/index_banner")),v(n)]).then((function(data){return{carousel:data[0],menu:data[1]}})).catch(r)},data:function(){return{carousel:[],menu:[],banner:"https://m1.calibur.tv/default-banner"}},computed:{pageMenu:function(){return z.a}},watch:{},created:function(){},mounted:function(){},methods:{}},J=(n(593),Object(c.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"homepage"}},[n("PageHeader",{attrs:{background:t.banner}}),t._v(" "),n("PageBanner",{attrs:{background:t.banner}}),t._v(" "),n("div",{staticClass:"v-layout"},[n("MenuBar",{attrs:{menu:t.menu}}),t._v(" "),n("div",{staticClass:"ssr-modules"},[n("Carousel",{attrs:{list:t.carousel}}),t._v(" "),n("RollRecommended")],1),t._v(" "),n("div",{staticClass:"page-modules"},t._l(t.pageMenu,(function(e){return n("a",{key:e.type,staticClass:"v-layout__row",class:{"anchor-module":e.main},attrs:{id:e.type}},[n(e.left.type,{tag:"component",staticClass:"v-layout__left",attrs:{slug:e.left.slug,type:e.type,name:e.left.name}}),t._v(" "),n(e.right.type,{tag:"component",staticClass:"v-layout__right",attrs:{slug:e.right.slug,type:e.type,name:e.right.name}})],1)})),0)],1),t._v(" "),n("VerticalNavBar",{attrs:{menu:t.pageMenu.filter((function(t){return t.main}))}}),t._v(" "),n("AboutSite"),t._v(" "),n("PageFooter")],1)}),[],!1,null,null,null));e.default=J.exports}}]);