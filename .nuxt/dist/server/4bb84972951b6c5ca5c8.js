exports.ids=[1],exports.modules={116:function(t,e){t.exports={}},117:function(t,e){t.exports={}},158:function(t,e,n){"use strict";n.r(e);var r=n(116),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},159:function(t,e,n){"use strict";n.r(e);var r=n(117),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},177:function(t,e,n){"use strict";e.a=[{type:"douga",main:!0,left:{slug:1,name:"动画",type:"MainFlowTab"},right:{slug:1,name:"特别推荐",type:"RecommendedSwipe"}},{type:"bangumi",main:!0,left:{slug:5,name:"番剧",type:"BangumiSwitcher"},right:{slug:5,type:"RankSwitcher"}},{type:"bangumi-about",main:!1,left:{slug:8,name:"番剧动态",type:"MainFlowTab"},right:{slug:8,type:"RankDaily"}},{type:"manga",main:!0,left:{slug:4,name:"漫画",type:"MainFlowTab"},right:{slug:4,type:"RankSwitcher"}},{type:"game",main:!0,left:{slug:2,name:"游戏",type:"MainFlowTab"},right:{slug:2,type:"RankSwitcher"}},{type:"novel",main:!0,left:{slug:6,name:"帖子",type:"MainFlowTab"},right:{slug:6,type:"RankDaily"}},{type:"music",main:!0,left:{slug:7,name:"音乐",type:"MainFlowTab"},right:{slug:7,type:"RankSwitcher"}},{type:"life",main:!0,left:{slug:3,name:"生活",type:"MainFlowTab"},right:{slug:3,type:"RankSwitcher"}}]},188:function(t,e){t.exports={}},189:function(t,e){t.exports={}},190:function(t,e){t.exports={}},191:function(t,e){t.exports={}},192:function(t,e){t.exports={}},193:function(t,e){t.exports={}},194:function(t,e){t.exports={}},195:function(t,e){t.exports={}},196:function(t,e){t.exports={}},197:function(t,e){t.exports={}},198:function(t,e){t.exports={}},199:function(t,e){t.exports={}},200:function(t,e){t.exports={}},201:function(t,e){t.exports={}},202:function(t,e){t.exports={}},203:function(t,e){t.exports={}},204:function(t,e,n){"use strict";var r={name:"HeaderPopover",components:{},props:{className:{type:String,default:""}},data:()=>({}),computed:{},watch:{},created(){},mounted(){},methods:{}},o=n(1);var l=Object(o.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"header-popover"},[this._ssrNode('<div class="trigger">',"</div>",[this._t("trigger")],2),this._ssrNode(" "),this._ssrNode("<div"+this._ssrClass("content",this.className)+">","</div>",[this._t("content")],2)],2)}),[],!1,(function(t){var e=n(158);e.__inject__&&e.__inject__(t)}),null,"909a136a").exports,c=n(2),d={name:"PageHeader",components:{HeaderPopover:l},props:{background:{type:String,default:""}},data:()=>({}),computed:{hasBg(){return!!this.background},isAuth(){return this.$store.state.isAuth},user(){return this.$store.state.user}},watch:{},created(){},mounted(){},methods:{handleSignIn(){this.$channel.$emit("sign-in")},handleLogout(){Object(c.f)(this),this.$cookie.remove("JWT-TOKEN"),this.$channel.socketDisconnect(),window.location="/"}}};var _=Object(o.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{class:{"with-bg":t.hasBg},attrs:{id:"page-header"}},[t._ssrNode((t.hasBg?'<div class="mask-wrap"><div class="mask-bg"'+t._ssrStyle(null,{backgroundImage:"url("+t.background+")"},null)+"></div></div>":"\x3c!----\x3e")+' <div class="mask-shim"></div> '),t._ssrNode('<div class="text-wrap v-layout">',"</div>",[t._ssrNode('<ul class="header-left">',"</ul>",[t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link home-link",attrs:{to:"/"}},[n("i",{staticClass:"iconfont ic-calibur"}),t._v(" "),n("span",[t._v("主站")])])],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("游戏中心")])])],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("直播")])])],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("会员购")])])],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("漫画")])])],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("赛事")])])],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("i",{staticClass:"iconfont ic-phone"}),t._v(" "),n("span",[t._v("下载APP")])])],1)],2),t._ssrNode(" "),t._ssrNode('<ul class="header-right">',"</ul>",[t.isAuth?[t._ssrNode('<li class="user-panel">',"</li>",[n("HeaderPopover",{attrs:{"class-name":"user-popover"},scopedSlots:t._u([{key:"trigger",fn:function(){return[n("NLink",{staticClass:"avatar",attrs:{to:t.$alias.user(t.user.slug)}},[n("img",{attrs:{src:t.$resizeImage(t.user.avatar,{width:60}),alt:""}})])]},proxy:!0},{key:"content",fn:function(){return[n("p",{staticClass:"nickname oneline",domProps:{innerHTML:t._s(t.user.nickname)}}),t._v(" "),n("NLink",{attrs:{to:t.$alias.user(t.user.slug,"setting")}},[n("div",{staticClass:"field"},[n("div",{staticClass:"label"},[n("i",{staticClass:"iconfont ic-setup_fill"}),t._v(" "),n("span",[t._v("设置")])])])]),t._v(" "),n("button",{staticClass:"sign-out",on:{click:t.handleLogout}},[t._v("\n                退出\n              ")])]},proxy:!0}],null,!1,1277139557)})],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("大会员")])])],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("消息")])])],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("动态")])])],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("稍后在看")])])],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("收藏")])])],1)]:[t._ssrNode('<li><button class="nav-link">\n            登录\n          </button></li> '),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("动态")])])],1)],t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("历史")])])],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("NLink",{staticClass:"nav-link",attrs:{to:"/"}},[n("span",[t._v("创作中心")])])],1),t._ssrNode(" "),t._ssrNode("<li>","</li>",[n("Button",{staticClass:"create-btn"},[t._v("\n          投稿\n        ")])],1)],2)],2)],2)}),[],!1,(function(t){var e=n(159);e.__inject__&&e.__inject__(t)}),null,"109bd019");e.a=_.exports},256:function(t,e,n){"use strict";n.r(e);var r=n(188),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},257:function(t,e,n){"use strict";n.r(e);var r=n(189),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},258:function(t,e,n){"use strict";n.r(e);var r=n(190),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},259:function(t,e,n){"use strict";n.r(e);var r=n(191),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},260:function(t,e,n){"use strict";n.r(e);var r=n(192),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},261:function(t,e,n){"use strict";n.r(e);var r=n(193),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},262:function(t,e,n){"use strict";n.r(e);var r=n(194),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},263:function(t,e,n){"use strict";n.r(e);var r=n(195),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},264:function(t,e,n){"use strict";n.r(e);var r=n(196),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},265:function(t,e,n){"use strict";n.r(e);var r=n(197),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},266:function(t,e,n){"use strict";n.r(e);var r=n(198),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},267:function(t,e,n){"use strict";n.r(e);var r=n(199),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},268:function(t,e,n){"use strict";n.r(e);var r=n(200),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},269:function(t,e,n){"use strict";n.r(e);var r=n(201),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},270:function(t,e,n){"use strict";n.r(e);var r=n(202),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},271:function(t,e,n){"use strict";n.r(e);var r=n(203),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},275:function(t,e,n){"use strict";n.r(e);var r=n(204),o={name:"PageBanner",props:{background:{required:!0,type:String}},data:()=>({keyword:""}),methods:{handleSearch(){this.keyword&&window.open(`https://search.bilibili.com/all?keyword=${encodeURIComponent(this.keyword)}&from_source=calibur`)}}},l=n(1);var c=Object(l.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("section",{style:{backgroundImage:"url("+this.background+")"},attrs:{id:"page-banner"}},[this._ssrNode('<div class="v-layout"><img'+this._ssrAttr("src",this.$resizeImage("logo-border.png",{width:220,rule:2}))+' alt="logo" class="logo"> <div class="search-box"><a href="https://www.bilibili.com/ranking" class="rank"><span>排行榜</span></a> <form action="#" method="get" class="search-wrap"><input placeholder="搜索 bilibili" type="text" name="keyword" aria-autocomplete="both" aria-haspopup="false" autocapitalize="off" autocomplete="off" autocorrect="off" role="combobox" spellcheck="false" maxlength="50"'+this._ssrAttr("value",this.keyword)+'> <button type="submit" class="submit-btn"></button></form></div></div>')])}),[],!1,(function(t){var e=n(256);e.__inject__&&e.__inject__(t)}),null,"5d3f0538").exports,d={name:"PageFooter",components:{},props:{},data:()=>({}),computed:{},watch:{},created(){},mounted(){},methods:{}};var _=Object(l.a)(d,(function(){var t=this.$createElement;return(this._self._c||t)("footer",{attrs:{id:"page-footer"}},[this._ssrNode('<div class="v-layout"><div class="links-wrap"><div class="links-item"><p>calibur</p> <ul><a href="javascript:;" class="fade-link">关于我们</a> <a href="javascript:;" class="fade-link">联系我们</a> <a href="javascript:;" class="fade-link">用户协议</a> <a href="javascript:;" class="fade-link">加入我们</a> <a href="javascript:;" class="fade-link">友情链接</a> <a href="javascript:;" class="fade-link">隐私政策</a></ul></div> <div class="links-item"><p>传送门</p> <ul><a href="javascript:;" class="fade-link">Excalibur</a> <a href="javascript:;" class="fade-link">Dollars</a> <a href="javascript:;" class="fade-link">Sword Art Online</a> <a href="javascript:;" class="fade-link">SOS Dan</a> <a href="javascript:;" class="fade-link">Death Note</a></ul></div> <ul class="icons-wrap"><li class="icons-item"><i class="iconfont ic-qq"></i> <p class="name">\n            QQ\n          </p> <div class="qr"><img src="https://m1.calibur.tv/qq_mini_app.png" alt></div></li> <li class="icons-item"><i class="iconfont ic-v-chat"></i> <p class="name">\n            微信\n          </p> <div class="qr"><img src="https://m1.calibur.tv/weixin_mini_app.jpg" alt></div></li></ul></div></div> <div class="v-layout"><div class="text-con"><p><span>互联网ICP备案：<a href="http://beian.miit.gov.cn/" target="_blank" class="fade-link">沪ICP备17050785号-1</a></span></p> <p>违法不良信息举报邮箱：<a href="mailto:im_bai@163.com" class="fade-link">im_bai@163.com</a></p> <p><a href="http://www.shjbzx.cn" target="_blank" class="fade-link">上海互联网举报中心</a> |\n        <a href="http://jbts.mct.gov.cn/" target="_blank" class="fade-link">12318全国文化市场举报网站</a> |\n        <a href="mailto:userreport@bilibili.com" class="fade-link">儿童色情信息举报专区</a></p> <p>网上有害信息举报专区：<a href="https://www.12377.cn/" target="_blank" class="fade-link">中国互联网违法和不良信息举报中心</a></p> <p>公司名称：上海十六夜网络科技有限公司 | 公司地址：浦东新区 万祥镇宏祥北路83弄1-42号</p></div></div>')])}),[],!1,(function(t){var e=n(257);e.__inject__&&e.__inject__(t)}),null,"212d27b2").exports;const f=t=>t.$axios.$get("v1/cm/index_menu_list");var m={name:"MenuBar",filters:{convertCount:t=>t?t>999?"999+":t:"- -"},props:{menu:{type:Array,default:()=>[]}},data(){return{list:this.menu}},mounted(){this.getCounter()},methods:{getCounter(){var t;(t=this,t.$axios.$get("v1/cm/index_menu_stat")).then(t=>{Object.keys(t).forEach(e=>{const n=this.list.findIndex(t=>t.id.toString()===e.toString());this.list[n].count=+t[e]})}).catch(()=>{})},convertPing:t=>`https://api.calibur.tv/v1/cm/report_menu_click?id=${t.id}&type=${t.type}`}};var h=Object(l.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"clearfix",attrs:{id:"menu-bar"}},[t._ssrNode('<li class="menu-item">',"</li>",[n("NuxtLink",{staticClass:"home-link menu-link",attrs:{to:"/"}},[n("div",{staticClass:"icon"}),t._v(" "),n("span",[t._v("首页")])])],1),t._ssrNode(" "),t._l(t.list,(function(e){return t._ssrNode('<li class="menu-item">',"</li>",[n("NuxtLink",{staticClass:"menu-link",attrs:{to:"/"}},[n("div",{staticClass:"count-wrap"},[n("span",{staticClass:"count"},[t._v(t._s(t._f("convertCount")(e.count)))])]),t._v(" "),n("span",{domProps:{textContent:t._s(e.name)}})]),t._ssrNode(' <ul class="sub-menu">'+t._ssrList(e.children,(function(sub){return'<li class="sub-item"><a target="_blank"'+t._ssrAttr("href",sub.href)+t._ssrAttr("ping",t.convertPing(sub))+"><span>"+t._ssrEscape(t._s(sub.name))+"</span></a></li>"}))+"</ul>")],2)}))],2)}),[],!1,(function(t){var e=n(258);e.__inject__&&e.__inject__(t)}),null,"375ebb67").exports,v={name:"VCarousel",props:{list:{type:Array,default:()=>[]}},data:()=>({activeIndex:0,reports:[0]}),computed:{showTitle(){const t=this.list[this.activeIndex];return t?t.title:""},showUrl(){const t=this.list[this.activeIndex];return t?this.convertUrl(t.link):""}},methods:{handleChange(t){this.activeIndex=t,this.reports.includes(t)||(this.reports.push(t),this.$axios.$post("v1/cm/report_banner",{type:"visit",id:this.list[t].id}))},convertUrl:t=>t,convertPing:t=>"https://api.calibur.tv/v1/cm/report_banner?type=click&id="+t}};var k=Object(l.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"v-carousel"}},[n("VSwitcher",{attrs:{"default-index":t.activeIndex,headers:t.list,swipe:!0,autoplay:5e3,align:"end"},on:{change:t.handleChange}},[t._l(t.list,(function(e,r){return n("a",{key:r,staticClass:"carousel-item",attrs:{slot:r,href:t.convertUrl(e.link),ping:t.convertPing(e.id),target:"_blank"},slot:r},[n("VImg",{attrs:{src:t.$resizeImage(e.image,{width:440,height:220})}})],1)})),t._v(" "),n("a",{staticClass:"title",attrs:{slot:"header-before",target:"_blank",href:t.showUrl},domProps:{textContent:t._s(t.showTitle)},slot:"header-before"}),t._v(" "),n("a",{staticClass:"more",attrs:{slot:"header-after",href:"javascript:;"},slot:"header-after"},[t._v("更多")])],2)],1)}),[],!1,(function(t){var e=n(259);e.__inject__&&e.__inject__(t)}),null,"7ab29a86").exports,y={name:"AboutSite",components:{},props:{},data:()=>({}),computed:{},watch:{},created(){},mounted(){},methods:{}};var w=Object(l.a)(y,(function(){var t=this.$createElement;return(this._self._c||t)("a",{attrs:{id:"about-site",href:"/"}},[this._ssrNode("\n  关于网站\n")])}),[],!1,(function(t){var e=n(260);e.__inject__&&e.__inject__(t)}),null,"0ba1cae7").exports,x=n(89),N={name:"VerticalNavBar",components:{},props:{menu:{required:!0,type:Array}},data:()=>({atTop:!0,offsetTop:0,offsets:[],active:-1}),computed:{top(){return this.atTop?"232px":this.offsetTop}},watch:{},created(){},mounted(){this.calcOffset(),window.addEventListener("scroll",this.onScroll)},methods:{onScroll:Object(x.throttle)(100,(function(){const t=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop);if(this.atTop=t<=220,t<=0)return void(this.active=-1);const e=this.offsets.map(e=>Math.abs(e-t));this.active=e.indexOf(Math.min(...e))})),calcOffset(){this.offsets=[];const t=document.querySelectorAll(".anchor-module"),e=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop);[].forEach.call(t,t=>{const rect=t.getBoundingClientRect();this.offsets.push(e+rect.top)});const n=this.$el.getBoundingClientRect().height,r=document.documentElement.clientHeight;this.offsetTop=n>=r?"0px":((r-n)/2|0)+"px";const o=this.offsets.map(t=>Math.abs(t-e));this.active=o.indexOf(Math.min(...o))}}};var C=Object(l.a)(N,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{style:{top:t.top},attrs:{id:"vertical-nav-bar"}},[t._ssrNode('<ul class="nav-list">'+t._ssrList(t.menu,(function(e,n){return"<li><a"+t._ssrAttr("href","#"+e.type)+t._ssrClass(null,{"is-active":n===t.active})+">"+t._ssrEscape(t._s(e.left.name))+"</a></li>"}))+'</ul> <a href="#" class="back-top"><span></span></a>')])}),[],!1,(function(t){var e=n(261);e.__inject__&&e.__inject__(t)}),null,"06962da3").exports,j={name:"HomepageFlow",components:{},props:{func:{required:!0,type:String},type:{type:String,default:"page"},auto:{type:Number,default:1},query:{type:Object,default:()=>{}}},data:()=>({}),computed:{},watch:{},created(){},mounted(){},methods:{handleCallback({data:data}){const{result:t}=data;t.length&&this.$emit("callback",t)}}};var $=Object(l.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FlowLoader",{staticClass:"homepage-flow",attrs:{func:t.func,type:t.type,query:Object.assign({},{$axios:t.$axios},t.query),auto:t.auto,callback:t.handleCallback},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.flow;return[t._t("default",null,{flow:n})]}}],null,!0)},[t._v(" "),n("template",{slot:"loading"},[n("i"),t._v(" "),n("span",[t._v("正在加载...")])]),t._v(" "),n("template",{slot:"error"},[n("i"),t._v(" "),n("span",[t._v("加载失败，"),n("em",[t._v("点击重试")])])]),t._v(" "),n("template",{slot:"nothing"},[n("i")])],2)}),[],!1,(function(t){var e=n(262);e.__inject__&&e.__inject__(t)}),null,"4ce73719").exports,S={name:"RecommendRectItem",components:{},props:{item:{type:Object,required:!0}},data:()=>({}),computed:{href(){return"https://www.bilibili.com/av"+this.item.model_id},ping(){return"https://api.calibur.tv/v1/flow/spider_report?type=click&id="+this.item.id}},watch:{},created(){},mounted(){},methods:{}};var I={name:"RollRecommended",components:{HomepageFlow:$,RecommendRectItem:Object(l.a)(S,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("li",{staticClass:"rec-rect-item"},[t._ssrNode("<a"+t._ssrAttr("href",t.href)+t._ssrAttr("ping",t.ping)+' target="_blank"><img'+t._ssrAttr("src",t.$resizeImage(t.item.data.poster,{width:160,height:100}))+' class="poster"> <span class="mask"><p class="title">'+t._ssrEscape(t._s(t.item.data.title))+'</p> <p class="author">'+t._ssrEscape("up主："+t._s(t.item.data.username))+'</p> <p class="play">'+t._ssrEscape("播放："+t._s(t.$utils.formatNumber(t.item.data.visit_count)))+"</p></span></a>")])}),[],!1,(function(t){var e=n(263);e.__inject__&&e.__inject__(t)}),null,"0342afe6").exports},props:{},data:()=>({activeIndex:0}),computed:{leftText(){const t=this.activeIndex;return 0===t?"昨日":1===t?"三日":"一周"},rightText(){const t=this.activeIndex;return 0===t?"一周":1===t?"昨日":"三日"}},watch:{},created(){},mounted(){},methods:{handleChangeRecommended(t){this.activeIndex=t},switchRecommended(t){t?this.$refs.switcher.next():this.$refs.switcher.prev()},handleLoaded(){console.log("handleLoaded")}}};var E=Object(l.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"roll-recommended"}},[n("VSwitcher",{ref:"switcher",attrs:{headers:["","",""]},on:{change:t.handleChangeRecommended}},[n("HomepageFlow",{attrs:{slot:"0",func:"getHotFlowData",query:{day:1}},on:{callback:t.handleLoaded},slot:"0",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return n("ul",{},t._l(r,(function(t){return n("RecommendRectItem",{key:t.id,attrs:{item:t}})})),1)}}])}),t._v(" "),n("HomepageFlow",{attrs:{slot:"1",func:"getHotFlowData",query:{day:3}},on:{callback:t.handleLoaded},slot:"1",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return n("ul",{},t._l(r,(function(t){return n("RecommendRectItem",{key:t.id,attrs:{item:t}})})),1)}}])}),t._v(" "),n("HomepageFlow",{attrs:{slot:"2",func:"getHotFlowData",query:{day:7}},on:{callback:t.handleLoaded},slot:"2",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return n("ul",{},t._l(r,(function(t){return n("RecommendRectItem",{key:t.id,attrs:{item:t}})})),1)}}])})],1),t._ssrNode(' <div class="indicator"><button class="btn-prev">'+t._ssrEscape("\n      "+t._s(t.leftText)+"\n    ")+'</button> <button class="btn-next">'+t._ssrEscape("\n      "+t._s(t.rightText)+"\n    ")+"</button></div>")],2)}),[],!1,(function(t){var e=n(264);e.__inject__&&e.__inject__(t)}),null,"0075f2d1").exports,L={name:"BangumiIntroItem",props:{item:{type:Object,required:!0}},data:()=>({}),computed:{},watch:{},created(){},mounted(){},methods:{}};var R={name:"BangumiSwitcher",components:{BangumiIntroItem:Object(l.a)(L,(function(){var t=this.$createElement;return(this._self._c||t)("li",{staticClass:"bgm-intro-item"},[this._ssrNode('<a href="javascript:;" class="poster"><img'+this._ssrAttr("src",this.$resizeImage(this.item.avatar,{width:72}))+'></a> <p class="intro"><a href="javascript:;" class="title fade-link">'+this._ssrEscape(this._s(this.item.name))+'</a> <span class="oneline">暂无</span></p>')])}),[],!1,(function(t){var e=n(265);e.__inject__&&e.__inject__(t)}),null,"13f3e163").exports},computed:{defaultIndex:()=>((new Date).getDay()||7)-1,resource(){return this.$store.getters["flow/getFlow"]({func:"getBangumiRelease",type:"page"})},list(){return this.resource?this.resource.result:[[],[],[],[],[],[],[]]},headers:()=>[{text:"一","text-active":"周一"},{text:"二","text-active":"周二"},{text:"三","text-active":"周三"},{text:"四","text-active":"周四"},{text:"五","text-active":"周五"},{text:"六","text-active":"周六"},{text:"日","text-active":"周日"}]},methods:{handleLazy(){this.$refs.loader.initData()},handleTabSwitch(){this.resource&&this.resource.error&&this.$refs.loader.initData()},handleRetry(){this.$refs.loader.retry()}}};var O=Object(l.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"lazyload",rawName:"v-lazyload",value:t.handleLazy,expression:"handleLazy"}],attrs:{id:"bangumi-switcher"}},[n("VSwitcher",{attrs:{"default-index":t.defaultIndex,headers:t.headers,"header-height":36,align:"around"},on:{change:t.handleTabSwitch}},[n("div",{staticClass:"header-before",attrs:{slot:"header-before"},slot:"header-before"},[n("i"),t._v(" "),n("a",{attrs:{href:"javascript:;"}},[t._v("番剧")])]),t._v(" "),n("a",{staticClass:"header-after",attrs:{slot:"header-after",href:"javascript:;"},slot:"header-after"},[n("span",[t._v("新番时间表")]),t._v(" "),n("i")]),t._v(" "),t._l(t.headers,(function(e,r){return n("template",{slot:r},[t.list[r]&&t.list[r].length?n("ul",{key:r,staticClass:"flow-content"},t._l(t.list[r],(function(t){return n("BangumiIntroItem",{key:t.id,attrs:{item:t}})})),1):n("div",{key:r,staticClass:"state-content"},[!t.resource||t.resource.loading?[n("i",{staticClass:"loading-img"}),t._v(" "),n("span",{staticClass:"loading-txt"},[t._v("正在加载...")])]:t.resource.error?[n("i",{staticClass:"error-img"}),t._v(" "),n("span",{on:{click:t.handleRetry}},[t._v("加载失败，"),n("em",[t._v("点击重试")])])]:[n("i",{staticClass:"nothing-img"})]],2)])}))],2),t._ssrNode(" "),n("FlowLoader",{ref:"loader",attrs:{func:"getBangumiRelease",type:"page",query:{$axios:t.$axios},auto:0}})],2)}),[],!1,(function(t){var e=n(266);e.__inject__&&e.__inject__(t)}),null,"77427666").exports,P={name:"RankSwitcher",components:{},props:{},data:()=>({}),computed:{},watch:{},created(){},mounted(){},methods:{}};var T=Object(l.a)(P,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rank-switcher"},[e("VSwitcher",{attrs:{"header-height":23,headers:["全网","站内"],align:"start",animated:!0,"header-trigger":"hover"}},[e("div",{staticClass:"header-before",attrs:{slot:"header-before"},slot:"header-before"},[this._v("\n      热门\n    ")]),this._v(" "),e("div",{staticClass:"header-after",attrs:{slot:"header-after"},slot:"header-after"},[this._v("\n      三日\n    ")]),this._v(" "),e("div",{staticClass:"k-item",staticStyle:{"background-color":"rgba(21,174,103,.5)"},attrs:{slot:"0"},slot:"0"},[this._v("\n      0\n    ")]),this._v(" "),e("div",{staticClass:"k-item",staticStyle:{"background-color":"rgba(125,205,244,.5)"},attrs:{slot:"1"},slot:"1"},[this._v("\n      1\n    ")])])],1)}),[],!1,(function(t){var e=n(267);e.__inject__&&e.__inject__(t)}),null,"1039438a").exports,F={name:"BiliVideoItem",props:{item:{type:Object,required:!0}},computed:{href(){return"https://www.bilibili.com/av"+this.item.model_id},ping(){return"https://api.calibur.tv/v1/flow/spider_report?type=click&id="+this.item.id}}};var B=Object(l.a)(F,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("li",{staticClass:"bili-video-item"},[t._ssrNode("<a"+t._ssrAttr("href",t.href)+t._ssrAttr("ping",t.ping)+' target="_blank" class="poster"><img'+t._ssrAttr("src",t.$resizeImage(t.item.data.poster,{width:160,height:100}))+' class="cover"> <div class="mask"><p class="duration">'+t._ssrEscape(t._s(t.$utils.formatDuration(t.item.data.duration)))+'</p></div></a> <div class="text"><a target="_blank"'+t._ssrAttr("href",t.href)+' class="title fade-link">'+t._s(t.item.data.title)+'</a> <div class="mask"><div><i class="view-count"></i> <span>'+t._ssrEscape(t._s(t.$utils.formatNumber(t.item.data.visit_count)))+'</span></div> <div><i class="danmu-count"></i> <span>'+t._ssrEscape(t._s(t.$utils.formatNumber(t.item.data.danmu_count)))+"</span></div></div></div>")])}),[],!1,(function(t){var e=n(268);e.__inject__&&e.__inject__(t)}),null,"8f6d98fc").exports;var A={name:"MainFlowTab",components:{HomepageFlow:$,BilbiliVideoItem:B},props:{type:{required:!0,type:String},name:{required:!0,type:String},slug:{required:!0,type:Number}},data:()=>({randId:[0,1,2,3,4,5,6,7,8,9][9*Math.random()|0]}),computed:{headers:()=>["有新动态","最新投稿"],backgroundPosition(){let t="";switch(this.type){case"douga":t="-141px -908px";break;case"bangumi":t="-141px -140px";break;case"game":t="-141px -203px";break;case"manga":t="-139px -1931px";break;case"music":t="-140px -266px";break;case"dance":t="-141px -461px";break;case"novel":t="-138px -1803px"}return t}},methods:{handleLoaded(data){this.$axios.$post("v1/flow/spider_report",{type:"visit",id:data.map(t=>t.id).join(",")})}}};var M=Object(l.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-flow-tab"},[n("VSwitcher",{attrs:{headers:t.headers,"header-height":55}},[n("template",{slot:"header-before"},[t.backgroundPosition?[n("i",{style:{backgroundPosition:t.backgroundPosition}}),t._v(" "),n("span",{domProps:{textContent:t._s(t.name)}})]:n("p",{domProps:{textContent:t._s(t.name)}})],2),t._v(" "),n("template",{slot:"header-after"},[n("a",{staticClass:"more",attrs:{href:"javascript:;"}},[n("span",[t._v("更多")]),t._v(" "),n("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),n("HomepageFlow",{attrs:{slot:"0",func:"getMixinFlowData",query:{slug:t.slug,sort:"activity",take:10,rand_id:t.randId}},on:{callback:t.handleLoaded},slot:"0",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return t._l(r,(function(t){return n("BilbiliVideoItem",{key:t.id,attrs:{item:t}})}))}}])}),t._v(" "),n("HomepageFlow",{attrs:{slot:"1",func:"getMixinFlowData",query:{slug:t.slug,sort:"newest",take:10,rand_id:t.randId}},on:{callback:t.handleLoaded},slot:"1",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return t._l(r,(function(t){return n("BilbiliVideoItem",{key:t.id,attrs:{item:t}})}))}}])})],2)],1)}),[],!1,(function(t){var e=n(269);e.__inject__&&e.__inject__(t)}),null,"60a4ab7e").exports,H={name:"RecommendedSwipe",components:{},props:{name:{type:String,default:""}},data:()=>({activeIndex:0}),computed:{list:()=>[{title:"测试1"},{title:"测试2"}]},watch:{},created(){},mounted(){},methods:{handleChange(t){this.activeIndex=t}}};var D=Object(l.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recommended-swipe"},[t._ssrNode('<p class="name">'+t._ssrEscape(t._s(t.name))+"</p> "),n("VSwitcher",{attrs:{headers:t.list,"header-height":35,autoplay:2e3,animated:!0,"header-trigger":"hover"},on:{change:t.handleChange}},[n("div",{staticClass:"k-item",staticStyle:{"background-color":"rgba(21,174,103,.5)"},attrs:{slot:"0"},slot:"0"},[t._v("\n      0\n    ")]),t._v(" "),n("div",{staticClass:"k-item",staticStyle:{"background-color":"rgba(125,205,244,.5)"},attrs:{slot:"1"},slot:"1"},[t._v("\n      1\n    ")]),t._v(" "),n("template",{slot:"header-before"},[t._v("\n      "+t._s(t.list[t.activeIndex].title)+"\n    ")])],2)],2)}),[],!1,(function(t){var e=n(270);e.__inject__&&e.__inject__(t)}),null,"cc849308").exports,V=n(177),z={name:"Homepage",components:{PageHeader:r.a,PageBanner:c,PageFooter:_,MenuBar:h,Carousel:k,AboutSite:w,VerticalNavBar:C,RollRecommended:E,BangumiSwitcher:O,RankSwitcher:T,MainFlowTab:M,RecommendedSwipe:D},props:{},asyncData({app:t,store:e,error:n}){return Promise.all([(r=t,r.$axios.$get("v1/cm/index_banner")),f(t),e.dispatch("flow/initData",{func:"getHotFlowData",type:"page",query:{day:1,$axios:t.$axios}})]).then(data=>({carousel:data[0],menu:data[1]})).catch(n);var r},data:()=>({carousel:[],menu:[],banner:"https://m1.calibur.tv/default-banner"}),computed:{pageMenu:()=>V.a},watch:{},created(){},mounted(){},methods:{}};var U=Object(l.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"homepage"}},[n("PageHeader",{attrs:{background:t.banner}}),t._ssrNode(" "),n("PageBanner",{attrs:{background:t.banner}}),t._ssrNode(" "),t._ssrNode('<div class="v-layout">',"</div>",[n("MenuBar",{attrs:{menu:t.menu}}),t._ssrNode(" "),t._ssrNode('<div class="ssr-modules">',"</div>",[n("Carousel",{attrs:{list:t.carousel}}),t._ssrNode(" "),n("RollRecommended")],2),t._ssrNode(" "),t._ssrNode('<div class="page-modules">',"</div>",t._l(t.pageMenu,(function(e){return t._ssrNode("<a"+t._ssrAttr("id",e.type)+t._ssrClass("v-layout__row",{"anchor-module":e.main})+">","</a>",[n(e.left.type,{tag:"component",staticClass:"v-layout__left",attrs:{slug:e.left.slug,type:e.type,name:e.left.name}}),t._ssrNode(" "),n(e.right.type,{tag:"component",staticClass:"v-layout__right",attrs:{slug:e.right.slug,type:e.type,name:e.right.name}})],2)})),0)],2),t._ssrNode(" "),n("VerticalNavBar",{attrs:{menu:t.pageMenu.filter((function(t){return t.main}))}}),t._ssrNode(" "),n("AboutSite"),t._ssrNode(" "),n("PageFooter")],2)}),[],!1,(function(t){var e=n(271);e.__inject__&&e.__inject__(t)}),null,"0454551e");e.default=U.exports}};